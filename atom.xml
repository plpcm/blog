<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>曹淼的“git博客”</title>
  <subtitle>道法自然</subtitle>
  <link href="/blog/atom.xml" rel="self"/>
  
  <link href="https://plpcm.github.io/blog/"/>
  <updated>2016-12-05T02:53:37.000Z</updated>
  <id>https://plpcm.github.io/blog/</id>
  
  <author>
    <name>曹淼</name>
    <email>plp.cm@qq.com</email>
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>Hexo搭建个人博客</title>
    <link href="https://plpcm.github.io/blog/2016/12/23/hexo-init/"/>
    <id>https://plpcm.github.io/blog/2016/12/23/hexo-init/</id>
    <published>2016-12-22T16:00:00.000Z</published>
    <updated>2016-12-05T02:53:37.000Z</updated>
    
    <content type="html"><![CDATA[<h3 id="安装Hexo"><a href="#安装Hexo" class="headerlink" title="安装Hexo"></a>安装Hexo</h3><ul>
<li>安装</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">mkdir hexo  <span class="comment">#创建一个文件夹</span></div><div class="line"><span class="built_in">cd</span> hexo</div><div class="line">npm install -g hexo-cli</div><div class="line">npm install hexo --save</div></pre></td></tr></table></figure>
<ul>
<li>部署Hexo：在Git shell 中输入</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">hexo init</div></pre></td></tr></table></figure>
<ul>
<li>安装Hexo 插件：自动生成sitemap,Rss，部署到git等，建议安装</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">npm install hexo-generator-index --save</div><div class="line">npm install hexo-generator-archive --save</div><div class="line">npm install hexo-generator-category --save</div><div class="line">npm install hexo-generator-tag --save</div><div class="line">npm install hexo-server --save</div><div class="line">npm install hexo-deployer-git --save</div><div class="line">npm install hexo-deployer-heroku --save</div><div class="line">npm install hexo-deployer-rsync --save</div><div class="line">npm install hexo-deployer-openshift --save</div><div class="line">npm install hexo-renderer-marked@0.2 --save</div><div class="line">npm install hexo-renderer-stylus@0.2 --save</div><div class="line">npm install hexo-generator-feed@1 --save</div><div class="line">npm install hexo-generator-sitemap@1 --save</div></pre></td></tr></table></figure>
<h2 id="Hexo常用的几个命令"><a href="#Hexo常用的几个命令" class="headerlink" title="Hexo常用的几个命令"></a>Hexo常用的几个命令</h2><h3 id="创建新博文"><a href="#创建新博文" class="headerlink" title="创建新博文"></a>创建新博文</h3><p>执行new命令，生成指定名称的文章至hexo\source_posts\postName.md。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">hexo new [layout] &quot;postName&quot; #新建文章</div></pre></td></tr></table></figure>
<p>其中layout是可选参数，默认值为post。有哪些layout呢，请到scaffolds目录下查看，这些文件名称就是layout名称。当然你可以添加自己的layout，方法就是添加一个文件即可，同时你也可以编辑现有的layout，比如post的layout默认是hexo\scaffolds\post.md</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">title: &#123; &#123; title &#125; &#125;</div><div class="line">date: &#123; &#123; date &#125; &#125;</div><div class="line">tags:</div><div class="line">---</div></pre></td></tr></table></figure>
<blockquote>
<p>请注意，大括号与大括号之间我多加了个空格，否则会被转义，不能正常显示。</p>
</blockquote>
<p>我想添加categories，以免每次手工输入，只需要修改这个文件添加一行，如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">title: &#123; &#123; title &#125; &#125;</div><div class="line">date: &#123; &#123; date &#125; &#125;</div><div class="line">categories: </div><div class="line">tags: </div><div class="line">---</div></pre></td></tr></table></figure>
<p>更多信息参考: <a href="http://hexo.io/docs/writing.html" target="_blank" rel="external">Writing</a></p>
<h3 id="运行服务器"><a href="#运行服务器" class="headerlink" title="运行服务器"></a>运行服务器</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ hexo server</div></pre></td></tr></table></figure>
<p>参考: <a href="http://hexo.io/docs/server.html" target="_blank" rel="external">Server</a></p>
<h3 id="生成静态站点文件"><a href="#生成静态站点文件" class="headerlink" title="生成静态站点文件"></a>生成静态站点文件</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ hexo generate</div></pre></td></tr></table></figure>
<p>参考: <a href="http://hexo.io/docs/generating.html" target="_blank" rel="external">Generating</a></p>
<h3 id="部署到Git"><a href="#部署到Git" class="headerlink" title="部署到Git"></a>部署到Git</h3><p>部署到Github前需要配置_config.yml文件</p>
<p>添加如下内容：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">deploy:</div><div class="line">	type: git</div><div class="line">	repository: git@github.com:EZLippi/EZLippi.github.io.git</div><div class="line">	branch: master</div></pre></td></tr></table></figure>
<p>然后输入：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ hexo deploy</div></pre></td></tr></table></figure>
<p>参考: <a href="http://hexo.io/docs/deployment.html" target="_blank" rel="external">Deployment</a></p>
<h2 id="fancybox"><a href="#fancybox" class="headerlink" title="fancybox"></a>fancybox</h2><p>可能有人对这个Reading页面中图片的fancybox效果感兴趣，这个是怎么做的呢。<br>很简单，只需要在你的文章*.md文件的头上添加photos项即可，然后一行行添加你要展示的照片:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">title: Hexo建立个人博客</div><div class="line">photos:</div><div class="line">- http://bruce.u.qiniudn.com/2013/11/27/reading/photos-0.jpg</div><div class="line">- http://bruce.u.qiniudn.com/2013/11/27/reading/photos-1.jpg</div><div class="line">---</div></pre></td></tr></table></figure>
<h2 id="主题设置"><a href="#主题设置" class="headerlink" title="主题设置"></a>主题设置</h2><p>本博客采用了iissnan的Next主题，他的博客有详细的安装教程，这里贴下链接<a href="http://theme-next.iissnan.com/" target="_blank" rel="external">next</a>，有需要的朋友直接参考他写的教程，一气呵成~</p>
<h3 id="下载主题"><a href="#下载主题" class="headerlink" title="下载主题"></a>下载主题</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">$ <span class="built_in">cd</span> hexo目录</div><div class="line">$ git <span class="built_in">clone</span> https://github.com/iissnan/hexo-theme-next themes/next</div></pre></td></tr></table></figure>
<h3 id="应用Hexo主题"><a href="#应用Hexo主题" class="headerlink" title="应用Hexo主题"></a>应用Hexo主题</h3><p>在hexo目录下找到_config.yml配置文件，找到 theme 字段，并将其值更改为 next，如下所示：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">theme: next</div></pre></td></tr></table></figure>
<h3 id="设置RSS"><a href="#设置RSS" class="headerlink" title="设置RSS"></a>设置RSS</h3><p>在上面的步骤中已经安装了Rss插件，只要要在themes\next_config.yml配置文件中添加如下一行即可：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">rss：</div></pre></td></tr></table></figure>
<h3 id="添加标签tags页面"><a href="#添加标签tags页面" class="headerlink" title="添加标签tags页面"></a>添加标签tags页面</h3><p>定位到 Hexo 站点目录下，使用 hexo new page 新建一个页面，命名为 tags，布局格式为page：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">$ <span class="built_in">cd</span> hexo目录</div><div class="line">$ hexo new page tags</div></pre></td></tr></table></figure>
<p>内容如下所示，如果要关闭tags页面的评论可以设置comments为false：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">title: 标签</div><div class="line">date: 2014-12-22 12:39:04</div><div class="line">type: &quot;tags&quot;</div><div class="line">comments: false</div><div class="line">---</div></pre></td></tr></table></figure>
<p>这样以后tags页面在每次执行hexo generate后自动更新。</p>
<h3 id="添加分类页面"><a href="#添加分类页面" class="headerlink" title="添加分类页面"></a>添加分类页面</h3><p>和上面的一样，在hexo目录下执行下面命令：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ hexo new page categories</div></pre></td></tr></table></figure>
<p>内容为：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">title: 分类</div><div class="line">date: 2014-12-22 12:39:04</div><div class="line">type: &quot;categories&quot;</div><div class="line">comments: false</div><div class="line">---</div></pre></td></tr></table></figure>
<h3 id="添加404页面"><a href="#添加404页面" class="headerlink" title="添加404页面"></a>添加404页面</h3><p>新建一个404.html文件，放到themes\next\source目录下，内容你自己定。</p>
<h3 id="代码高亮"><a href="#代码高亮" class="headerlink" title="代码高亮"></a>代码高亮</h3><p>以前jekyll代码高亮需要用到pygments插件，Hexo下更加简单，只需要按照下面的格式：<br><a href="http://www.ezlippi.com/images/highlight.png" target="_blank" rel="external"><img src="http://www.ezlippi.com/images/highlight.png" alt="img"></a><br>效果如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">System.out.println(&quot;hello hexo!&quot;);</div></pre></td></tr></table></figure>
<p>你也可以更改代码高亮的主题，一共有五种，可选的值有 normal，night， night blue， night bright， night eighties，修改themes\next_config.yml文件，如下所示：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">highlight_theme: normal</div></pre></td></tr></table></figure>
<h2 id="第三方服务"><a href="#第三方服务" class="headerlink" title="第三方服务"></a>第三方服务</h2><h3 id="多说评论"><a href="#多说评论" class="headerlink" title="多说评论"></a>多说评论</h3><p>登录多说官网，登录后点我要安装，然后填写站点相关信息，最主要的是duoshuo_shortname这个字段，设置后之后修改themes\next_config.yml文件，把duoshuo_shortname改成你的，如下所示：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">duoshuo_shortname: ezlippi</div></pre></td></tr></table></figure>
<h3 id="百度统计"><a href="#百度统计" class="headerlink" title="百度统计"></a>百度统计</h3><p>登录百度统计，转到获取代码截面，找到百度统计脚本id，然后把themes\next_config.yml文件下的baidu_analytics字段改成你的id，如下所示：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">baidu_analytics: 340874ba9357cbe81570aa4ac1185941</div></pre></td></tr></table></figure>
<h3 id="站内搜索"><a href="#站内搜索" class="headerlink" title="站内搜索"></a>站内搜索</h3><p>next主题集成了swiftype搜索，你需要到swiftype配置一个搜索引擎， 而后编辑 站点配置文件， 新增 swiftype_key 字段，值为你的 swiftype 搜索引擎的 key。 详细的配置请参考：<a href="http://theme-next.iissnan.com/third-party-services.html#swfitype" target="_blank" rel="external">swfitype教程</a></p>
<h3 id="其他设置"><a href="#其他设置" class="headerlink" title="其他设置"></a>其他设置</h3><p>其他设置比如侧边栏、友情链接、菜单栏等请参考<a href="http://theme-next.iissnan.com/theme-settings.html" target="_blank" rel="external">next主题配置教程</a></p>
<p>最后附上我的站点配置文件，如果有不懂的可以给我留言或者发邮件。<br>_config.yml配置文件内容如下：</p>
<p>站点配置文件：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div></pre></td><td class="code"><pre><div class="line"># Hexo Configuration</div><div class="line">## Docs: http://hexo.io/docs/configuration.html</div><div class="line">## Source: https://github.com/hexojs/hexo/</div><div class="line"></div><div class="line"># Site</div><div class="line">title: Lippi-浮生志</div><div class="line">subtitle:</div><div class="line">description: Easy Lippi</div><div class="line">author: EZLippi </div><div class="line">language: zh-Hans</div><div class="line">timezone: Asia/Shanghai</div><div class="line"></div><div class="line"># URL</div><div class="line">## If your site is put in a subdirectory, set url as &apos;http://yoursite.com/child&apos; and root as &apos;/child/&apos;</div><div class="line">url: http://www.ezlippi.com</div><div class="line">root: /</div><div class="line">permalink: /blog/:year/:month/:title.html</div><div class="line">permalink_defaults:</div><div class="line"></div><div class="line"># Directory</div><div class="line">source_dir: source</div><div class="line">public_dir: public</div><div class="line">tag_dir: tags</div><div class="line">archive_dir: archives</div><div class="line">category_dir: categories</div><div class="line">code_dir: downloads/code</div><div class="line">i18n_dir: :lang</div><div class="line">skip_render:</div><div class="line"></div><div class="line"># Writing</div><div class="line">new_post_name: :year-:month-:day-:title.md # File name of new posts</div><div class="line">default_layout: post</div><div class="line">titlecase: false # Transform title into titlecase</div><div class="line">external_link: true # Open external links in new tab</div><div class="line">filename_case: 0</div><div class="line">render_drafts: false</div><div class="line">post_asset_folder: false</div><div class="line">relative_link: false</div><div class="line">future: true</div><div class="line">highlight:</div><div class="line">  enable: true</div><div class="line">  line_number: true</div><div class="line">  auto_detect: true</div><div class="line">  tab_replace:</div><div class="line"></div><div class="line"># Category &amp; Tag</div><div class="line">default_category: uncategorized</div><div class="line">category_map:</div><div class="line">tag_map:</div><div class="line"></div><div class="line"># Date / Time format</div><div class="line">## Hexo uses Moment.js to parse and display date</div><div class="line">## You can customize the date format as defined in</div><div class="line">## http://momentjs.com/docs/#/displaying/format/</div><div class="line">date_format: YYYY-MM-DD</div><div class="line">time_format: HH:mm:ss</div><div class="line"></div><div class="line"># Pagination</div><div class="line">## Set per_page to 0 to disable pagination</div><div class="line">per_page: 10</div><div class="line">pagination_dir: page</div><div class="line"></div><div class="line"># Extensions</div><div class="line">## Plugins: http://hexo.io/plugins/</div><div class="line">## Themes: http://hexo.io/themes/</div><div class="line">theme: next </div><div class="line">#since: 2014</div><div class="line"># Deployment</div><div class="line">## Docs: http://hexo.io/docs/deployment.html</div><div class="line">deploy:</div><div class="line">  type: git</div><div class="line">  repository: git@github.com:EZLippi/EZLippi.github.io.git </div><div class="line">  coding.net: git@git.coding.net:ezlippi/ezlippi.git,coding-pages</div></pre></td></tr></table></figure>
<p>主题配置文件：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div><div class="line">126</div><div class="line">127</div><div class="line">128</div><div class="line">129</div><div class="line">130</div><div class="line">131</div><div class="line">132</div><div class="line">133</div><div class="line">134</div><div class="line">135</div><div class="line">136</div><div class="line">137</div><div class="line">138</div><div class="line">139</div><div class="line">140</div><div class="line">141</div><div class="line">142</div><div class="line">143</div><div class="line">144</div><div class="line">145</div><div class="line">146</div><div class="line">147</div><div class="line">148</div><div class="line">149</div><div class="line">150</div><div class="line">151</div><div class="line">152</div><div class="line">153</div><div class="line">154</div><div class="line">155</div><div class="line">156</div><div class="line">157</div><div class="line">158</div><div class="line">159</div><div class="line">160</div><div class="line">161</div><div class="line">162</div><div class="line">163</div><div class="line">164</div><div class="line">165</div><div class="line">166</div><div class="line">167</div><div class="line">168</div><div class="line">169</div><div class="line">170</div><div class="line">171</div><div class="line">172</div><div class="line">173</div><div class="line">174</div><div class="line">175</div><div class="line">176</div><div class="line">177</div><div class="line">178</div><div class="line">179</div><div class="line">180</div><div class="line">181</div><div class="line">182</div><div class="line">183</div><div class="line">184</div><div class="line">185</div><div class="line">186</div><div class="line">187</div><div class="line">188</div><div class="line">189</div><div class="line">190</div><div class="line">191</div><div class="line">192</div><div class="line">193</div><div class="line">194</div><div class="line">195</div><div class="line">196</div><div class="line">197</div><div class="line">198</div><div class="line">199</div><div class="line">200</div><div class="line">201</div><div class="line">202</div><div class="line">203</div><div class="line">204</div><div class="line">205</div><div class="line">206</div><div class="line">207</div><div class="line">208</div><div class="line">209</div><div class="line">210</div><div class="line">211</div><div class="line">212</div><div class="line">213</div><div class="line">214</div><div class="line">215</div><div class="line">216</div><div class="line">217</div><div class="line">218</div><div class="line">219</div><div class="line">220</div><div class="line">221</div><div class="line">222</div><div class="line">223</div><div class="line">224</div><div class="line">225</div><div class="line">226</div><div class="line">227</div><div class="line">228</div><div class="line">229</div><div class="line">230</div><div class="line">231</div><div class="line">232</div><div class="line">233</div><div class="line">234</div><div class="line">235</div><div class="line">236</div><div class="line">237</div><div class="line">238</div><div class="line">239</div><div class="line">240</div><div class="line">241</div><div class="line">242</div><div class="line">243</div><div class="line">244</div><div class="line">245</div><div class="line">246</div><div class="line">247</div><div class="line">248</div><div class="line">249</div><div class="line">250</div><div class="line">251</div><div class="line">252</div><div class="line">253</div><div class="line">254</div><div class="line">255</div><div class="line">256</div><div class="line">257</div><div class="line">258</div><div class="line">259</div></pre></td><td class="code"><pre><div class="line"># ---------------------------------------------------------------</div><div class="line"># Site Information Settings</div><div class="line"># ---------------------------------------------------------------</div><div class="line"></div><div class="line"># Place your favicon.ico to /source directory.</div><div class="line">favicon: /favicon.ico</div><div class="line"></div><div class="line"># Set default keywords (Use a comma to separate)</div><div class="line">keywords: &quot;Hexo, NexT&quot;</div><div class="line"></div><div class="line"># Set rss to false to disable feed link.</div><div class="line"># Leave rss as empty to use site&apos;s feed link.</div><div class="line"># Set rss to specific value if you have burned your feed already.</div><div class="line">rss:</div><div class="line"></div><div class="line"># Specify the date when the site was setup</div><div class="line">since: 2014</div><div class="line"></div><div class="line"></div><div class="line"></div><div class="line"></div><div class="line"># ---------------------------------------------------------------</div><div class="line"># Menu Settings</div><div class="line"># ---------------------------------------------------------------</div><div class="line"></div><div class="line"># When running hexo in a subdirectory (e.g. domain.tld/blog)</div><div class="line"># Remove leading slashes ( &quot;/archives&quot; -&gt; &quot;archives&quot; )</div><div class="line">menu:</div><div class="line">  home: /</div><div class="line">  categories: /categories</div><div class="line">  archives: /archives</div><div class="line">  tags: /tags</div><div class="line">  about: /about</div><div class="line">#  commonweal: /404.html</div><div class="line"></div><div class="line"></div><div class="line"># Enable/Disable menu icons.</div><div class="line"># Icon Mapping:</div><div class="line">#   Map a menu item to a specific FontAwesome icon name.</div><div class="line">#   Key is the name of menu item and value is the name of FontAwsome icon.</div><div class="line">#   When an question mask icon presenting up means that the item has no mapping icon.</div><div class="line">menu_icons:</div><div class="line">  enable: true</div><div class="line">  # Icon Mapping.</div><div class="line">  home: home</div><div class="line">  about: user</div><div class="line">  categories: th</div><div class="line">  tags: tags</div><div class="line">  archives: archive</div><div class="line">  commonweal: heartbeat</div><div class="line"></div><div class="line"></div><div class="line"></div><div class="line"></div><div class="line"># ---------------------------------------------------------------</div><div class="line"># Scheme Settings</div><div class="line"># ---------------------------------------------------------------</div><div class="line"></div><div class="line"># Schemes</div><div class="line">#scheme: Muse</div><div class="line">scheme: Mist</div><div class="line">#scheme: Pisces</div><div class="line"></div><div class="line"></div><div class="line"></div><div class="line"># ---------------------------------------------------------------</div><div class="line"># Sidebar Settings</div><div class="line"># ---------------------------------------------------------------</div><div class="line"></div><div class="line"></div><div class="line"># Social links</div><div class="line">social:</div><div class="line">  GitHub: https://github.com/EZLippi</div><div class="line">  weibo: http://weibo.com/ouyanglip</div><div class="line">  zhihu: http://www.zhihu.com/people/lippi-ouyang</div><div class="line">  #Others:</div><div class="line"></div><div class="line">      </div><div class="line"># Social Icons</div><div class="line">social_icons:</div><div class="line">  enable: true</div><div class="line">  # Icon Mappings</div><div class="line">  GitHub: github</div><div class="line">  Twitter: twitter</div><div class="line">  weibo: weibo</div><div class="line">  zhihu: weibo </div><div class="line"></div><div class="line"></div><div class="line"># Sidebar Avatar</div><div class="line"># in theme directory(source/images): /images/avatar.jpg</div><div class="line"># in site  directory(source/uploads): /uploads/avatar.jpg</div><div class="line"># default : /images/default_avatar.jpg</div><div class="line">avatar: /images/avatar.jpg</div><div class="line"></div><div class="line"></div><div class="line"># TOC in the Sidebar</div><div class="line">toc:</div><div class="line">  enable: true</div><div class="line"></div><div class="line">  # Automatically add list number to toc.</div><div class="line">  number: true</div><div class="line"></div><div class="line"></div><div class="line"># Creative Commons 4.0 International License.</div><div class="line"># http://creativecommons.org/</div><div class="line"># Available: by | by-nc | by-nc-nd | by-nc-sa | by-nd | by-sa | zero</div><div class="line">#creative_commons: by-nc-sa</div><div class="line">#creative_commons:</div><div class="line"></div><div class="line">sidebar:</div><div class="line">  # Sidebar Position, available value: left | right</div><div class="line">  position: left</div><div class="line">  #position: right</div><div class="line"></div><div class="line">  # Sidebar Display, available value:</div><div class="line">  #  - post    expand on posts automatically. Default.</div><div class="line">  #  - always  expand for all pages automatically</div><div class="line">  #  - hide    expand only when click on the sidebar toggle icon.</div><div class="line">  #  - remove  Totally remove sidebar including sidebar toggle icon.</div><div class="line">  display: post</div><div class="line">  #display: always</div><div class="line">  #display: hide</div><div class="line">  #display: remove</div><div class="line"></div><div class="line"></div><div class="line"></div><div class="line"># ---------------------------------------------------------------</div><div class="line"># Misc Theme Settings</div><div class="line"># ---------------------------------------------------------------</div><div class="line"></div><div class="line"># Custom Logo.</div><div class="line"># !!Only available for Default Scheme currently.</div><div class="line"># Options:</div><div class="line">#   enabled: [true/false] - Replace with specific image</div><div class="line">#   image: url-of-image   - Images&apos;s url</div><div class="line">custom_logo:</div><div class="line">  enabled: false</div><div class="line">  image:</div><div class="line"></div><div class="line"></div><div class="line"># Code Highlight theme</div><div class="line"># Available value:</div><div class="line">#    normal | night | night eighties | night blue | night bright</div><div class="line"># https://github.com/chriskempson/tomorrow-theme</div><div class="line">highlight_theme: night </div><div class="line"></div><div class="line"># Automatically scroll page to section which is under &lt;!-- more --&gt; mark.</div><div class="line">scroll_to_more: true</div><div class="line"></div><div class="line"># Automatically Excerpt</div><div class="line">auto_excerpt:</div><div class="line">  enable: false</div><div class="line">  length: 150</div><div class="line"></div><div class="line"># Use Lato font</div><div class="line">use_font_lato: true</div><div class="line"></div><div class="line"></div><div class="line"></div><div class="line"># ---------------------------------------------------------------</div><div class="line"># Third Party Services Settings</div><div class="line"># ---------------------------------------------------------------</div><div class="line"></div><div class="line"># MathJax Support</div><div class="line">mathjax:</div><div class="line"></div><div class="line"></div><div class="line"># Swiftype Search API Key</div><div class="line">swiftype_key: fLM9qfxyerC6njvM7usy</div><div class="line"></div><div class="line"># Baidu Analytics ID</div><div class="line">baidu_analytics: 340874ba9357cbe81570aa4ac1185941</div><div class="line"></div><div class="line"></div><div class="line"># Duoshuo ShortName</div><div class="line">duoshuo_shortname: ezlippi </div><div class="line"></div><div class="line"># Disqus</div><div class="line">#disqus_shortname:</div><div class="line"></div><div class="line"># Share</div><div class="line">#jiathis:</div><div class="line">#add_this_id:</div><div class="line"></div><div class="line"># Share</div><div class="line">duoshuo_share: true</div><div class="line"># 多说热评文章 true 或者 false</div><div class="line">duoshuo_hotartical: true</div><div class="line"></div><div class="line"># Google Webmaster tools verification setting</div><div class="line"># See: https://www.google.com/webmasters/</div><div class="line">#google_site_verification:</div><div class="line"></div><div class="line"></div><div class="line"># Google Analytics</div><div class="line">#google_analytics:</div><div class="line"></div><div class="line"></div><div class="line"># Make duoshuo show UA</div><div class="line"># user_id must NOT be null when admin_enable is true!</div><div class="line"># you can visit http://dev.duoshuo.com get duoshuo user id.</div><div class="line">duoshuo_info:</div><div class="line">  ua_enable: true</div><div class="line">  admin_enable: false</div><div class="line">  user_id: 0</div><div class="line">  #admin_nickname: ROOT</div><div class="line"></div><div class="line"></div><div class="line"># Facebook SDK Support.</div><div class="line"># https://github.com/iissnan/hexo-theme-next/pull/410</div><div class="line">facebook_sdk:</div><div class="line">  enable: false</div><div class="line">  app_id:       #&lt;app_id&gt;</div><div class="line">  fb_admin:     #&lt;user_id&gt;</div><div class="line">  like_button:  #true</div><div class="line">  webmaster:    #true</div><div class="line"></div><div class="line"></div><div class="line"># Show number of visitors to each article.</div><div class="line"># You can visit https://leancloud.cn get AppID and AppKey.</div><div class="line">leancloud_visitors:</div><div class="line">  enable: false</div><div class="line">  app_id: #&lt;app_id&gt;</div><div class="line">  app_key: #&lt;app_key&gt;</div><div class="line"></div><div class="line"></div><div class="line"># Tencent analytics ID</div><div class="line"># tencent_analytics:</div><div class="line"></div><div class="line"></div><div class="line"></div><div class="line"></div><div class="line"></div><div class="line"></div><div class="line">#! ---------------------------------------------------------------</div><div class="line">#! DO NOT EDIT THE FOLLOWING SETTINGS</div><div class="line">#! UNLESS YOU KNOW WHAT YOU ARE DOING</div><div class="line">#! ---------------------------------------------------------------</div><div class="line"></div><div class="line"># Motion</div><div class="line">use_motion: true</div><div class="line"></div><div class="line"># Fancybox</div><div class="line">fancybox: true</div><div class="line"></div><div class="line"># Static files</div><div class="line">vendors: vendors</div><div class="line">css: css</div><div class="line">js: js</div><div class="line">images: images</div><div class="line"></div><div class="line"># Theme version</div><div class="line">version: 0.5.0</div><div class="line"></div><div class="line"># title, chinese available</div><div class="line">links_title: 友情链接 </div><div class="line"># # links</div><div class="line">links:</div><div class="line">   MacTalk: http://macshuo.com/</div></pre></td></tr></table></figure>
<p>参考文献：</p>
<p><a href="https://hexo.io/" target="_blank" rel="external">Hexo</a><br><a href="http://sunwhut.com/2015/10/30/buildBlog/?hmsr=toutiao.io&amp;utm_medium=toutiao.io&amp;utm_source=toutiao.io" target="_blank" rel="external">如何利用GitHub Pages和Hexo快速搭建个人博客</a><br><a href="http://theme-next.iissnan.com/" target="_blank" rel="external">Next主题</a></p>
]]></content>
    
    <summary type="html">
    
      Hexo搭建个人博客
    
    </summary>
    
      <category term="hexo" scheme="https://plpcm.github.io/blog/categories/hexo/"/>
    
    
      <category term="hexo" scheme="https://plpcm.github.io/blog/tags/hexo/"/>
    
      <category term="next" scheme="https://plpcm.github.io/blog/tags/next/"/>
    
  </entry>
  
  <entry>
    <title>收藏链接</title>
    <link href="https://plpcm.github.io/blog/2016/12/05/hotlink/"/>
    <id>https://plpcm.github.io/blog/2016/12/05/hotlink/</id>
    <published>2016-12-05T08:25:33.000Z</published>
    <updated>2016-12-05T08:25:33.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="平时的一些收集，不想转载的放到这里记录下来"><a href="#平时的一些收集，不想转载的放到这里记录下来" class="headerlink" title="平时的一些收集，不想转载的放到这里记录下来"></a>平时的一些收集，不想转载的放到这里记录下来</h2><h4 id="Markdown-语法说明-简体中文版"><a href="#Markdown-语法说明-简体中文版" class="headerlink" title="Markdown 语法说明 (简体中文版)"></a>Markdown 语法说明 (简体中文版)</h4><p><a href="http://wowubuntu.com/markdown/" target="_blank" rel="external">http://wowubuntu.com/markdown/</a></p>
<h2 id="hexo"><a href="#hexo" class="headerlink" title="hexo"></a>hexo</h2><h4 id="hexo主题next使用帮助"><a href="#hexo主题next使用帮助" class="headerlink" title="hexo主题next使用帮助"></a>hexo主题next使用帮助</h4><p><a href="http://theme-next.iissnan.com/getting-started.html" target="_blank" rel="external">http://theme-next.iissnan.com/getting-started.html</a></p>
<h4 id="很不错的hexo介绍文章"><a href="#很不错的hexo介绍文章" class="headerlink" title="很不错的hexo介绍文章"></a>很不错的hexo介绍文章</h4><p><a href="http://ibruce.info/2013/11/22/hexo-your-blog/" target="_blank" rel="external">http://ibruce.info/2013/11/22/hexo-your-blog/</a></p>
<h4 id="hexo原作者-Hexo-颯爽登場！"><a href="#hexo原作者-Hexo-颯爽登場！" class="headerlink" title="hexo原作者-Hexo 颯爽登場！"></a>hexo原作者-Hexo 颯爽登場！</h4><p><a href="https://zespia.tw/blog/2012/10/11/hexo-debut/" target="_blank" rel="external">https://zespia.tw/blog/2012/10/11/hexo-debut/</a></p>
<h2 id="python"><a href="#python" class="headerlink" title="python"></a>python</h2><h4 id="zc-buildout"><a href="#zc-buildout" class="headerlink" title="zc.buildout"></a>zc.buildout</h4><p><a href="https://www.baidu.com/s?ie=UTF-8&amp;wd=zc.buildout" target="_blank" rel="external">https://www.baidu.com/s?ie=UTF-8&amp;wd=zc.buildout</a></p>
<h4 id="使用buildout管理项目"><a href="#使用buildout管理项目" class="headerlink" title="使用buildout管理项目"></a>使用buildout管理项目</h4><p><a href="http://www.infoq.com/cn/presentations/manage-projects-using-buildout?utm_source=infoq&amp;utm_medium=videos_homepage&amp;utm_campaign=videos_row2&amp;from=the5fire" target="_blank" rel="external">http://www.infoq.com/cn/presentations/manage-projects-using-buildout?utm_source=infoq&amp;utm_medium=videos_homepage&amp;utm_campaign=videos_row2&amp;from=the5fire</a></p>
<h2 id="mac"><a href="#mac" class="headerlink" title="mac"></a>mac</h2><h4 id="powerline-fonts"><a href="#powerline-fonts" class="headerlink" title="powerline fonts"></a>powerline fonts</h4><p><a href="https://github.com/powerline/fonts" target="_blank" rel="external">https://github.com/powerline/fonts</a></p>
<h4 id="一种zsh主题-powerline-shell"><a href="#一种zsh主题-powerline-shell" class="headerlink" title="一种zsh主题 powerline-shell"></a>一种zsh主题 powerline-shell</h4><p><a href="https://github.com/banga/powerline-shell" target="_blank" rel="external">https://github.com/banga/powerline-shell</a></p>
]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;平时的一些收集，不想转载的放到这里记录下来&quot;&gt;&lt;a href=&quot;#平时的一些收集，不想转载的放到这里记录下来&quot; class=&quot;headerlink&quot; title=&quot;平时的一些收集，不想转载的放到这里记录下来&quot;&gt;&lt;/a&gt;平时的一些收集，不想转载的放到这里记录下来&lt;/
    
    </summary>
    
      <category term="Collection" scheme="https://plpcm.github.io/blog/categories/Collection/"/>
    
    
  </entry>
  
  <entry>
    <title>Nginx虚拟主机根据不同的域名使用不同的root路径</title>
    <link href="https://plpcm.github.io/blog/2016/03/12/nginx-var-root/"/>
    <id>https://plpcm.github.io/blog/2016/03/12/nginx-var-root/</id>
    <published>2016-03-12T07:33:16.000Z</published>
    <updated>2016-12-02T10:07:55.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="一-应用场景描述"><a href="#一-应用场景描述" class="headerlink" title="一 应用场景描述"></a>一 应用场景描述</h2><p>应开发同事需求，需要在开发环境的Nginx能够根据不同的域名使用不同的root路径。<br>例如如果域名是</p>
<p>aa.abc.com,就使用root路径为/data/public/aa</p>
<p>bb.abc.com,就使用root路径为/data/public/bb</p>
<p>cc.abc.com,就是用root路径为/data/public/cc</p>
<h2 id="二-解决方法"><a href="#二-解决方法" class="headerlink" title="二 解决方法"></a>二 解决方法</h2><figure class="highlight c"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div></pre></td><td class="code"><pre><div class="line">server</div><div class="line">&#123;</div><div class="line">        listen      <span class="number">80</span>;</div><div class="line">        server_name *.abc.com;</div><div class="line">        <span class="built_in">set</span> $path_name aa;</div><div class="line">        <span class="keyword">if</span> ($host ~ <span class="string">"bb"</span>)</div><div class="line">        &#123;</div><div class="line">          <span class="built_in">set</span> $path_name bb;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">if</span> ($host ~ <span class="string">"cc"</span>)</div><div class="line">        &#123;</div><div class="line">          <span class="built_in">set</span> $path_name cc;</div><div class="line">        &#125;</div><div class="line">        root        /data/<span class="keyword">public</span>/$path_name/;</div><div class="line">        location / &#123;</div><div class="line">            <span class="keyword">if</span> (!-e $request_filename)&#123;</div><div class="line">              rewrite /(.*) /index.php last;</div><div class="line">			&#125;</div><div class="line">            index index.php;</div><div class="line">        &#125;</div><div class="line">        location ~ .php$ &#123;</div><div class="line">            fastcgi_pass  <span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">9000</span>;</div><div class="line">            fastcgi_index  index.php;</div><div class="line">            fastcgi_param  SCRIPT_FILENAME  $document_root/$fastcgi_script_name;</div><div class="line">            include        fastcgi_params;</div><div class="line">        &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>这里设置变量$path_name,然后在root路径中使用这个变量</p>
<h2 id="三-相关Nginx指令介绍"><a href="#三-相关Nginx指令介绍" class="headerlink" title="三 相关Nginx指令介绍"></a>三 相关Nginx指令介绍</h2><ol>
<li>set指令<br>用于定义一个变量，并为变量赋值<br>作用范围为if,location,server<br>如以上的<br>set $path_name aa;</li>
<li>if指令<br>if(condition) {…}<br>作用范围为<br>如：</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">if ($host ~ &quot;bb&quot;)</div><div class="line">&#123;</div><div class="line">set $path_name bb;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>if指令用于检查一个条件是否符合，如果条件符合，则执行大括号内的内容。if指令不支持嵌套，不支持多个&amp;&amp;或||<br>可以指定的条件为：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">1）变量名</div><div class="line">2）变量比较可以使用 =（等于）和!=（不等于）</div><div class="line">3）正则表达式匹配可以使用 ~（区分大小写匹配）和 ~* （不区分大小写匹配）</div><div class="line">  !~ 和 !~* 则表示不匹配</div><div class="line">4）-f和!-f 用来判断文件是否存在</div><div class="line">5) -d和!-d 用来判断目录是否存在</div><div class="line">6) -e和!-e 用来判断文件或目录是否存在</div><div class="line">7）-x和!-x 用来判断文件是否可以执行</div></pre></td></tr></table></figure>
<ol>
<li>Nginx内置变量</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">$host                            请求的主机名</div><div class="line">$request_filename                    请求的文件名</div></pre></td></tr></table></figure>
<ol>
<li>rewrite指令</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">rewrite regex replacement flag;</div></pre></td></tr></table></figure>
<p>用来重定向URL</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">if (!-e $request_filename)&#123;</div><div class="line">rewrite /(.*) /index.php last;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>rewrite最后一项为标记位，Nginx支持的标记为有：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">last          表示完成rewrite</div><div class="line">permanent      返回301永久重定向，浏览器地址栏会显示跳转后的URL</div><div class="line">break        本条规则匹配完成后，终止其他规则的匹配</div><div class="line">redirect        返回302临时重定向</div></pre></td></tr></table></figure>
<p>last和break完成URL的重定向，浏览器上的地址不会变，但在服务器端上的位置发生了变化。permanent和redirect用来实现URL跳转，浏览器地址栏会显示跳转后的URL。<br>使用alias指令时必须使用last指令，使用proxy_pass指令时必须使用break指令</p>
]]></content>
    
    <summary type="html">
    
      应开发同事需求，需要在开发环境的Nginx能够根据不同的域名使用不同的root路径。例如如果域名是aa.abc.com,就使用root路径为/data/public/aa bb.abc.com,就使用root路径为/data/public/bb cc.abc.com,就是用root路径为/data/public/cc
    
    </summary>
    
      <category term="nginx" scheme="https://plpcm.github.io/blog/categories/nginx/"/>
    
    
      <category term="nginx" scheme="https://plpcm.github.io/blog/tags/nginx/"/>
    
  </entry>
  
  <entry>
    <title>OpenResty实现防cc攻击</title>
    <link href="https://plpcm.github.io/blog/2016/03/02/openresty-cc/"/>
    <id>https://plpcm.github.io/blog/2016/03/02/openresty-cc/</id>
    <published>2016-03-02T10:30:16.000Z</published>
    <updated>2016-12-02T10:28:47.000Z</updated>
    
    <content type="html"><![CDATA[<p>导读<strong>OpenResty 通过汇聚各种设计精良的 Nginx 模块（由章亦春自主研发并汇聚各种精良模块），从而将 Nginx 有效地变成一个强大的通用 Web 应用平台。这样，Web 开发人员和系统工程师可以使用 Lua 脚本语言调动 Nginx 支持的各种 C 以及 Lua 模块，快速构造出足以胜任 10K 乃至 1000K 以上单机并发连接的高性能 Web 应用系统</strong></p>
<p>本文介绍使用openresty来实现防cc攻击的功能。openresty官网<a href="http://openresty.org/cn/index.html" target="_blank" rel="external">http://openresty.org/cn/index.html</a>。下面是防cc攻击的流程图。</p>
<p><img src="/blog/uploads/openresty/openresty-cc.png" alt="流程图"></p>
<p>根据流程图，我们知道防cc攻击主要包括两部分，一是限制请求速度，二是给用户发送js跳转代码进行验证请求是否合法。</p>
<p><strong>安装依赖</strong></p>
<p>RHEL/Centos:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">yum install readline-devel pcre-devel openssl-devel</div></pre></td></tr></table></figure>
<p>ubuntu:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">apt-get install libreadline-dev libncurses5-dev libpcre3-dev libssl-dev perl</div></pre></td></tr></table></figure>
<p><strong>luajit安装</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">cd</span> /tmp/</div><div class="line">git <span class="built_in">clone</span> http://luajit.org/git/luajit-2.0.git</div><div class="line"><span class="built_in">cd</span> luajit-2.0/</div><div class="line">make &amp;&amp; make install</div><div class="line">ln -sf luajit-2.0.0-beta10 /usr/<span class="built_in">local</span>/bin/luajit</div><div class="line">ln -sf /usr/<span class="built_in">local</span>/lib/libluajit-5.1.so.2 /usr/lib/</div></pre></td></tr></table></figure>
<p><strong>openresty安装</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">cd</span> /tmp</div><div class="line">wget http://agentzh.org/misc/nginx/ngx_openresty-1.2.4.13.tar.gz</div><div class="line">tar xzf ngx_openresty-1.2.4.13.tar.gz</div><div class="line"><span class="built_in">cd</span> ngx_openresty-1.2.4.13/</div><div class="line">./configure --prefix=/usr/<span class="built_in">local</span>/openresty --with-luajit</div><div class="line">make &amp;&amp; make install</div></pre></td></tr></table></figure>
<p><strong>nginx配置</strong></p>
<p>nginx.conf:</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line">http&#123;</div><div class="line">[......]</div><div class="line">lua_shared_dict limit <span class="number">10</span>m;</div><div class="line">lua_shared_dict jsjump <span class="number">10</span>m;</div><div class="line"></div><div class="line">    server &#123;</div><div class="line">#lua_code_cache off;</div><div class="line">        listen       <span class="number">80</span>;</div><div class="line">        server_name  www.centos.bz;</div><div class="line"></div><div class="line">        location / &#123;</div><div class="line">default_type  text/html;</div><div class="line">content_by_lua_file <span class="string">"/usr/local/openresty/nginx/conf/lua"</span>;</div><div class="line">        &#125;</div><div class="line">        location @cc &#123;</div><div class="line">            internal;</div><div class="line">            root   html;</div><div class="line">            index  index.html index.htm;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>/usr/local/openresty/nginx/conf/lua文件:</p>
<figure class="highlight lua"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div></pre></td><td class="code"><pre><div class="line"><span class="comment">-- 限速功能</span></div><div class="line"><span class="keyword">local</span> ip = ngx.var.binary_remote_addr</div><div class="line"><span class="keyword">local</span> limit = ngx.shared.limit</div><div class="line"><span class="keyword">local</span> req,_=limit:get(ip)</div><div class="line"><span class="keyword">if</span> req <span class="keyword">then</span></div><div class="line">		<span class="comment">-- 10秒钟内容最多只能请求20次</span></div><div class="line">        <span class="keyword">if</span> req &gt; <span class="number">20</span> <span class="keyword">then</span></div><div class="line">                ngx.exit(<span class="number">503</span>)</div><div class="line">        <span class="keyword">else</span></div><div class="line">                limit:incr(ip,<span class="number">1</span>)</div><div class="line">        <span class="keyword">end</span></div><div class="line"><span class="keyword">else</span></div><div class="line">        limit:set(ip,<span class="number">1</span>,<span class="number">10</span>)</div><div class="line"><span class="keyword">end</span></div><div class="line"><span class="comment">--验证部分</span></div><div class="line"><span class="keyword">local</span> jsjump = ngx.shared.jsjump</div><div class="line"><span class="keyword">local</span> uri = ngx.var.request_uri</div><div class="line"><span class="keyword">local</span> jspara,flags=jsjump:get(ip)</div><div class="line"><span class="keyword">local</span> args = ngx.req.get_uri_args()</div><div class="line"><span class="keyword">if</span> jspara <span class="keyword">then</span></div><div class="line">    <span class="keyword">if</span> flags <span class="keyword">then</span></div><div class="line">        ngx.exec(<span class="string">"@cc"</span>)</div><div class="line">    <span class="keyword">else</span></div><div class="line">                <span class="keyword">local</span> p_jskey=<span class="string">''</span></div><div class="line">                <span class="keyword">if</span> args[<span class="string">"jskey"</span>] <span class="keyword">and</span> <span class="built_in">type</span>(args[<span class="string">"jskey"</span>])==<span class="string">'table'</span> <span class="keyword">then</span></div><div class="line">                         p_jskey=args[<span class="string">"jskey"</span>][<span class="built_in">table</span>.getn(args[<span class="string">"jskey"</span>])]</div><div class="line">                <span class="keyword">else</span></div><div class="line">                         p_jskey=args[<span class="string">"jskey"</span>]</div><div class="line">                <span class="keyword">end</span></div><div class="line">        <span class="keyword">if</span> p_jskey <span class="keyword">and</span> p_jskey==<span class="built_in">tostring</span>(jspara) <span class="keyword">then</span></div><div class="line">                        jsjump:set(ip,jspara,<span class="number">3600</span>,<span class="number">1</span>) <span class="comment">--通过后，白名单时间为3600秒，即1小时</span></div><div class="line">                        ngx.exec(<span class="string">"@cc"</span>)</div><div class="line">        <span class="keyword">else</span></div><div class="line">                        <span class="keyword">local</span> url=<span class="string">''</span></div><div class="line">                        <span class="keyword">if</span> ngx.var.args <span class="keyword">then</span></div><div class="line">                               url=ngx.var.scheme..<span class="string">"://"</span>..ngx.var.host..uri..<span class="string">"&amp;jskey="</span>..jspara</div><div class="line">                        <span class="keyword">else</span></div><div class="line">                               url=ngx.var.scheme..<span class="string">"://"</span>..ngx.var.host..uri..<span class="string">"?jskey="</span>..jspara</div><div class="line">                        <span class="keyword">end</span></div><div class="line">                        <span class="keyword">local</span> jscode=<span class="string">"window.location.href='"</span>..url..<span class="string">"';"</span></div><div class="line">                        ngx.say(jscode)</div><div class="line">        <span class="keyword">end</span></div><div class="line">    <span class="keyword">end</span></div><div class="line"><span class="keyword">else</span></div><div class="line"><span class="built_in">math</span>.randomseed( <span class="built_in">os</span>.time() );</div><div class="line">    <span class="keyword">local</span> random=<span class="built_in">math</span>.random(<span class="number">100000</span>,<span class="number">999999</span>)</div><div class="line">    jsjump:set(ip,random,<span class="number">60</span>)</div><div class="line">    <span class="keyword">local</span> url=<span class="string">''</span></div><div class="line">    <span class="keyword">if</span> ngx.var.args <span class="keyword">then</span></div><div class="line">        url=ngx.var.scheme..<span class="string">"://"</span>..ngx.var.host..uri..<span class="string">"&amp;jskey="</span>..random</div><div class="line">    <span class="keyword">else</span></div><div class="line">        url=ngx.var.scheme..<span class="string">"://"</span>..ngx.var.host..uri..<span class="string">"?jskey="</span>..random</div><div class="line">    <span class="keyword">end</span></div><div class="line">    <span class="keyword">local</span> jscode=<span class="string">"window.location.href='"</span>..url..<span class="string">"';"</span></div><div class="line">    ngx.say(jscode)</div><div class="line"><span class="keyword">end</span></div></pre></td></tr></table></figure>
]]></content>
    
    <summary type="html">
    
      本文介绍使用openresty来实现防cc攻击的功能。
    
    </summary>
    
      <category term="openresty" scheme="https://plpcm.github.io/blog/categories/openresty/"/>
    
    
      <category term="cc" scheme="https://plpcm.github.io/blog/tags/cc/"/>
    
      <category term="防攻击" scheme="https://plpcm.github.io/blog/tags/%E9%98%B2%E6%94%BB%E5%87%BB/"/>
    
      <category term="openresty" scheme="https://plpcm.github.io/blog/tags/openresty/"/>
    
  </entry>
  
  <entry>
    <title>nginx限制某个IP同一时间段的访问次数</title>
    <link href="https://plpcm.github.io/blog/2016/03/02/nginx-limit-mod/"/>
    <id>https://plpcm.github.io/blog/2016/03/02/nginx-limit-mod/</id>
    <published>2016-03-02T09:35:16.000Z</published>
    <updated>2016-12-02T10:28:33.000Z</updated>
    
    <content type="html"><![CDATA[<p>转载自: <a href="http://www.nginx.cn/446.html" target="_blank" rel="external">http://www.nginx.cn/446.html</a></p>
<p>如何设置能限制某个IP某一时间段的访问次数是一个让人头疼的问题，特别面对恶意的ddos攻击的时候。其中CC攻击（Challenge Collapsar）是DDOS（分布式拒绝服务）的一种，也是一种常见的网站攻击方法，攻击者通过代理服务器或者肉鸡向向受害主机不停地发大量数据包，造成对方服务器资源耗尽，一直到宕机崩溃。</p>
<p>cc攻击一般就是使用有限的ip数对服务器频繁发送数据来达到攻击的目的，nginx可以通过HttpLimitReqModul和HttpLimitZoneModule配置来限制ip在同一时间段的访问次数来防cc攻击。</p>
<p>HttpLimitReqModul用来限制连单位时间内连接数的模块，使用limit_req_zone和limit_req指令配合使用来达到限制。一旦并发连接超过指定数量，就会返回503错误。</p>
<p>HttpLimitConnModul用来限制单个ip的并发连接数，使用limit_zone和limit_conn指令</p>
<p>这两个模块的区别前一个是对一段时间内的连接数限制，后者是对同一时刻的连接数限制</p>
<h3 id="HttpLimitReqModul-限制某一段时间内同一ip访问数实例"><a href="#HttpLimitReqModul-限制某一段时间内同一ip访问数实例" class="headerlink" title="HttpLimitReqModul 限制某一段时间内同一ip访问数实例"></a>HttpLimitReqModul 限制某一段时间内同一ip访问数实例</h3><figure class="highlight c"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"></div><div class="line">http&#123;</div><div class="line">    ...</div><div class="line"></div><div class="line">    #定义一个名为allips的limit_req_zone用来存储session，大小是<span class="number">10</span>M内存，</div><div class="line">    #以$binary_remote_addr 为key,限制平均每秒的请求为<span class="number">20</span>个，</div><div class="line">    #<span class="number">1</span>M能存储<span class="number">16000</span>个状态，rete的值必须为整数，</div><div class="line">    #如果限制两秒钟一个请求，可以设置成<span class="number">30</span>r/m</div><div class="line"></div><div class="line">    limit_req_zone $binary_remote_addr zone=allips:<span class="number">10</span>m rate=<span class="number">20</span>r/s;</div><div class="line">    ...</div><div class="line">    server&#123;</div><div class="line">        ...</div><div class="line">        location &#123;</div><div class="line">            ...</div><div class="line"></div><div class="line">            #限制每ip每秒不超过<span class="number">20</span>个请求，漏桶数burst为<span class="number">5</span></div><div class="line">            <span class="meta">#brust的意思就是，如果第1秒、2,3,4秒请求为19个，</span></div><div class="line">            #第<span class="number">5</span>秒的请求为<span class="number">25</span>个是被允许的。</div><div class="line">            #但是如果你第<span class="number">1</span>秒就<span class="number">25</span>个请求，第<span class="number">2</span>秒超过<span class="number">20</span>的请求返回<span class="number">503</span>错误。</div><div class="line">            <span class="meta">#nodelay，如果不设置该选项，严格使用平均速率限制请求数，</span></div><div class="line">            #第<span class="number">1</span>秒<span class="number">25</span>个请求时，<span class="number">5</span>个请求放到第<span class="number">2</span>秒执行，</div><div class="line">            #设置nodelay，<span class="number">25</span>个请求将在第<span class="number">1</span>秒执行。</div><div class="line"></div><div class="line">            limit_req zone=allips burst=<span class="number">5</span> nodelay;</div><div class="line">            ...</div><div class="line">        &#125;</div><div class="line">        ...</div><div class="line">    &#125;</div><div class="line">    ...</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="HttpLimitZoneModule-限制并发连接数实例"><a href="#HttpLimitZoneModule-限制并发连接数实例" class="headerlink" title="HttpLimitZoneModule 限制并发连接数实例"></a>HttpLimitZoneModule 限制并发连接数实例</h3><p>limit_zone只能定义在http作用域，limit_conn可以定义在http server location作用域</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div></pre></td><td class="code"><pre><div class="line">http&#123;</div><div class="line">    ...</div><div class="line"></div><div class="line">    #定义一个名为one的limit_zone,大小<span class="number">10</span>M内存来存储session，</div><div class="line">    #以$binary_remote_addr 为key</div><div class="line">    <span class="meta">#nginx 1.18以后用limit_conn_zone替换了limit_conn</span></div><div class="line">    #且只能放在http作用域</div><div class="line">    limit_conn_zone   one  $binary_remote_addr  <span class="number">10</span>m;</div><div class="line">    ...</div><div class="line">    server&#123;</div><div class="line">        ...</div><div class="line">        location &#123;</div><div class="line">            ...</div><div class="line">           limit_conn one <span class="number">20</span>;          #连接数限制</div><div class="line"></div><div class="line">           #带宽限制,对单个连接限数，如果一个ip两个连接，就是<span class="number">500</span>x2k</div><div class="line">           limit_rate <span class="number">500</span>k;</div><div class="line"></div><div class="line">            ...</div><div class="line">        &#125;</div><div class="line">        ...</div><div class="line">    &#125;</div><div class="line">    ...</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="nginx白名单设置"><a href="#nginx白名单设置" class="headerlink" title="nginx白名单设置"></a>nginx白名单设置</h3><p>以上配置会对所有的ip都进行限制，有些时候我们不希望对搜索引擎的蜘蛛或者自己测试ip进行限制，<br>对于特定的白名单ip我们可以借助geo指令实现。<br>1.</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div></pre></td><td class="code"><pre><div class="line">http&#123;</div><div class="line">     geo $limited&#123;</div><div class="line">        <span class="keyword">default</span> <span class="number">1</span>;</div><div class="line">        <span class="meta">#google</span></div><div class="line">        <span class="number">64.233</span><span class="number">.160</span><span class="number">.0</span>/<span class="number">19</span> <span class="number">0</span>;</div><div class="line">        <span class="number">65.52</span><span class="number">.0</span><span class="number">.0</span>/<span class="number">14</span> <span class="number">0</span>;</div><div class="line">        <span class="number">66.102</span><span class="number">.0</span><span class="number">.0</span>/<span class="number">20</span> <span class="number">0</span>;</div><div class="line">        <span class="number">66.249</span><span class="number">.64</span><span class="number">.0</span>/<span class="number">19</span> <span class="number">0</span>;</div><div class="line">        <span class="number">72.14</span><span class="number">.192</span><span class="number">.0</span>/<span class="number">18</span> <span class="number">0</span>;</div><div class="line">        <span class="number">74.125</span><span class="number">.0</span><span class="number">.0</span>/<span class="number">16</span> <span class="number">0</span>;</div><div class="line">        <span class="number">209.85</span><span class="number">.128</span><span class="number">.0</span>/<span class="number">17</span> <span class="number">0</span>;</div><div class="line">        <span class="number">216.239</span><span class="number">.32</span><span class="number">.0</span>/<span class="number">19</span> <span class="number">0</span>;</div><div class="line">        #M$</div><div class="line">        <span class="number">64.4</span><span class="number">.0</span><span class="number">.0</span>/<span class="number">18</span> <span class="number">0</span>;</div><div class="line">        <span class="number">157.60</span><span class="number">.0</span><span class="number">.0</span>/<span class="number">16</span> <span class="number">0</span>;</div><div class="line">        <span class="number">157.54</span><span class="number">.0</span><span class="number">.0</span>/<span class="number">15</span> <span class="number">0</span>;</div><div class="line">        <span class="number">157.56</span><span class="number">.0</span><span class="number">.0</span>/<span class="number">14</span> <span class="number">0</span>;</div><div class="line">        <span class="number">207.46</span><span class="number">.0</span><span class="number">.0</span>/<span class="number">16</span> <span class="number">0</span>;</div><div class="line">        <span class="number">207.68</span><span class="number">.192</span><span class="number">.0</span>/<span class="number">20</span> <span class="number">0</span>;</div><div class="line">        <span class="number">207.68</span><span class="number">.128</span><span class="number">.0</span>/<span class="number">18</span> <span class="number">0</span>;</div><div class="line">        <span class="meta">#yahoo</span></div><div class="line">        <span class="number">8.12</span><span class="number">.144</span><span class="number">.0</span>/<span class="number">24</span> <span class="number">0</span>;</div><div class="line">        <span class="number">66.196</span><span class="number">.64</span><span class="number">.0</span>/<span class="number">18</span> <span class="number">0</span>;</div><div class="line">        <span class="number">66.228</span><span class="number">.160</span><span class="number">.0</span>/<span class="number">19</span> <span class="number">0</span>;</div><div class="line">        <span class="number">67.195</span><span class="number">.0</span><span class="number">.0</span>/<span class="number">16</span> <span class="number">0</span>;</div><div class="line">        <span class="number">74.6</span><span class="number">.0</span><span class="number">.0</span>/<span class="number">16</span> <span class="number">0</span>;</div><div class="line">        <span class="number">68.142</span><span class="number">.192</span><span class="number">.0</span>/<span class="number">18</span> <span class="number">0</span>;</div><div class="line">        <span class="number">72.30</span><span class="number">.0</span><span class="number">.0</span>/<span class="number">16</span> <span class="number">0</span>;</div><div class="line">        <span class="number">209.191</span><span class="number">.64</span><span class="number">.0</span>/<span class="number">18</span> <span class="number">0</span>;</div><div class="line">        #My IPs</div><div class="line">        <span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>/<span class="number">32</span> <span class="number">0</span>;</div><div class="line">        <span class="number">123.456</span><span class="number">.0</span><span class="number">.0</span>/<span class="number">28</span> <span class="number">0</span>; <span class="meta">#example for your server CIDR</span></div><div class="line">    &#125;</div></pre></td></tr></table></figure>
<p>geo指令定义了一个白名单$limited变量，默认值为1，如果客户端ip在上面的范围内，$limited的值为0</p>
<p>2.使用map指令映射搜索引擎客户端的ip为空串，如果不是搜索引擎就显示本身真是的ip，这样搜索引擎ip就不能存到limit_req_zone内存session中，所以不会限制搜索引擎的ip访问</p>
<p>map $limited $limit {<br>1 $binary_remote_addr;<br>0 “”;<br>}</p>
<p>3.设置limit_req_zone和limit_req<br>limit_req_zone $limit zone=foo:1m rate=10r/m;</p>
<p>limit_req zone=foo burst=5;</p>
<p><strong>最后我们使用ab压php-fpm的方式，对上面的方法效果实际测试下</strong></p>
<p>例1：限制只允许一分钟内只允许一个ip访问60次配置，也就是平均每秒1次<br>首先我们准备一个php脚本放在根目录下$document_root<br>test.php</p>
<p>&gt;</p>
<p>nginx配置增加<code>limit_req_zone</code> 和 <code>limit_req</code></p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">http&#123;</div><div class="line">    ...</div><div class="line">    limit_req_zone $binary_remote_addr zone=allips:<span class="number">10</span>m rate=<span class="number">60</span>r/m;</div><div class="line">    ...</div><div class="line">    server&#123;</div><div class="line">        ...</div><div class="line">        location &#123;</div><div class="line">            ...</div><div class="line">            limit_req zone=allips;</div><div class="line">            ...</div><div class="line">        &#125;</div><div class="line">        ...</div><div class="line">    &#125;</div><div class="line">    ...</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>ab -n 5 -c 1 <a href="http://www.weizhang.org/test.php" target="_blank" rel="external">http://www.weizhang.org/test.php</a></p>
<p>118.144.94.193 - - [22/Dec/2012:06:27:06 +0000] “GET /test.php HTTP/1.0” 200 11000 “-“ “ApacheBench/2.3”<br>118.144.94.193 - - [22/Dec/2012:06:27:06 +0000] “GET /test.php HTTP/1.0” 503 537 “-“ “ApacheBench/2.3”<br>118.144.94.193 - - [22/Dec/2012:06:27:07 +0000] “GET /test.php HTTP/1.0” 503 537 “-“ “ApacheBench/2.3”<br>118.144.94.193 - - [22/Dec/2012:06:27:07 +0000] “GET /test.php HTTP/1.0” 503 537 “-“ “ApacheBench/2.3”<br>118.144.94.193 - - [22/Dec/2012:06:27:07 +0000] “GET /test.php HTTP/1.0” 503 537 “-“ “ApacheBench/2.3”</p>
<p>未设置brust和nodelay可以看到该配置只允许每秒访问1次，超出的请求返回503错误</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">http&#123;</div><div class="line">    ...</div><div class="line">    limit_req_zone $binary_remote_addr zone=allips:<span class="number">10</span>m rate=<span class="number">60</span>r/m;</div><div class="line">    ...</div><div class="line">    server&#123;</div><div class="line">        ...</div><div class="line">        location &#123;</div><div class="line">            ...</div><div class="line">            limit_req zone=allips burst=<span class="number">1</span> nodelay;</div><div class="line">            ...</div><div class="line">        &#125;</div><div class="line">        ...</div><div class="line">    &#125;</div><div class="line">    ...</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>ab -n 5 -c 1 <a href="http://www.weizhang.org/test.php" target="_blank" rel="external">http://www.weizhang.org/test.php</a></p>
<p>118.144.94.193 - - [22/Dec/2012:07:01:00 +0000] “GET /test.php HTTP/1.0” 200 11000 “-“ “ApacheBench/2.3”<br>118.144.94.193 - - [22/Dec/2012:07:01:00 +0000] “GET /test.php HTTP/1.0” 200 11000 “-“ “ApacheBench/2.3”<br>118.144.94.193 - - [22/Dec/2012:07:01:01 +0000] “GET /test.php HTTP/1.0” 503 537 “-“ “ApacheBench/2.3”<br>118.144.94.193 - - [22/Dec/2012:07:01:01 +0000] “GET /test.php HTTP/1.0” 503 537 “-“ “ApacheBench/2.3”<br>118.144.94.193 - - [22/Dec/2012:07:01:01 +0000] “GET /test.php HTTP/1.0” 503 537 “-“ “ApacheBench/2.3”</p>
<p>设置brust=1和nodelay后允许第1秒处理两个请求。</p>
]]></content>
    
    <summary type="html">
    
      如何设置能限制某个IP某一时间段的访问次数是一个让人头疼的问题，特别面对恶意的ddos攻击的时候。其中CC攻击（Challenge Collapsar）是DDOS（分布式拒绝服务）的一种，也是一种常见的网站攻击方法，攻击者通过代理服务器或者肉鸡向向受害主机不停地发大量数据包，造成对方服务器资源耗尽，一直到宕机崩溃。cc攻击一般就是使用有限的ip数对服务器频繁发送数据来达到攻击的目的，nginx可以通过HttpLimitReqModul和HttpLimitZoneModule配置来限制ip在同一时间段的访问次数来防cc攻击。
    
    </summary>
    
      <category term="nginx" scheme="https://plpcm.github.io/blog/categories/nginx/"/>
    
    
      <category term="nginx" scheme="https://plpcm.github.io/blog/tags/nginx/"/>
    
      <category term="cc" scheme="https://plpcm.github.io/blog/tags/cc/"/>
    
      <category term="防攻击" scheme="https://plpcm.github.io/blog/tags/%E9%98%B2%E6%94%BB%E5%87%BB/"/>
    
  </entry>
  
  <entry>
    <title>Git 的 .gitignore 配置</title>
    <link href="https://plpcm.github.io/blog/2016/02/22/git-ignore/"/>
    <id>https://plpcm.github.io/blog/2016/02/22/git-ignore/</id>
    <published>2016-02-22T07:00:16.000Z</published>
    <updated>2016-11-30T09:56:11.000Z</updated>
    
    <content type="html"><![CDATA[<p>.gitignore配置文件用于配置不需要加入版本管理的文件，配置好该文件可以为我们的版本管理带来很大的便利，以下是个人对于配 置.gitignore 的一些心得。</p>
<p>1.配置语法：</p>
<p>　　以斜杠“ /”“开头表示目录；</p>
<p>　　以星号“ *”“通配多个字符；</p>
<p>　　以问号“ ?”“通配单个字符</p>
<p>　　以方括号“ []” 包含单个字符的匹配列表；</p>
<p>　　以叹号“ !”“表示不忽略(跟踪)匹配到的文件或目录；</p>
<p>　　此外，git 对于 .ignore<br>配置文件是按行从上到下进行规则匹配的，意味着如果前面的规则匹配的范围更大，则后面的规则将不会生效；</p>
<p>2.示例：</p>
<p>(1)规则：<code>fd1/*</code></p>
<pre><code>说明：忽略目录 fd1 下的全部内容；注意，不管是根目录下的 /fd1/ 目录，还是某个子目录 /child/fd1/ 目录，都会被忽略；
</code></pre><p>(2)规则：<code>/fd1/*</code></p>
<pre><code>说明：忽略根目录下的 /fd1/ 目录的全部内容；
</code></pre><p>(3)规则：</p>
<pre><code>            /*
            !.gitignore
            !/fw/bin/
            !/fw/sf/

说明：忽略全部内容，但是不忽略 .gitignore 文件、根目录下的 /fw/bin/ 和 /fw/sf/ 目录；
</code></pre>]]></content>
    
    <summary type="html">
    
      .gitignore配置文件用于配置不需要加入版本管理的文件，配置好该文件可以为我们的版本管理带来很大的便利，以下是个人对于配置.gitignore 的一些心得。
    
    </summary>
    
      <category term="git" scheme="https://plpcm.github.io/blog/categories/git/"/>
    
    
      <category term="git" scheme="https://plpcm.github.io/blog/tags/git/"/>
    
  </entry>
  
  <entry>
    <title>Git远程操作详解</title>
    <link href="https://plpcm.github.io/blog/2016/02/21/git-remote-server/"/>
    <id>https://plpcm.github.io/blog/2016/02/21/git-remote-server/</id>
    <published>2016-02-21T02:45:33.000Z</published>
    <updated>2016-12-02T10:11:48.000Z</updated>
    
    <content type="html"><![CDATA[<p><a href="http://zh.wikipedia.org/wiki/Git" target="_blank" rel="external">Git</a>是目前最流行的<a href="http://www.ruanyifeng.com/blog/2008/12/a_visual_guide_to_version_control.html" target="_blank" rel="external">版本管理系统</a>，学会Git几乎成了开发者的必备技能。<br>Git有很多优势，其中之一就是远程操作非常简便。本文详细介绍5个Git命令，它们的概念和用法，理解了这些内容，你就会完全掌握Git远程操作。</p>
<ul>
<li>git clone</li>
<li>git remote</li>
<li>git fetch</li>
<li>git pull</li>
<li>git push</li>
</ul>
<p>本文针对初级用户，从最简单的讲起，但是需要读者对Git的基本用法有所了解。同时，本文覆盖了上面5个命令的几乎所有的常用用法，所以对于熟练用户也有参考价值。<br><img src="http://image.beekka.com/blog/2014/bg2014061202.jpg" alt="git"></p>
<p>##一、git clone<br>远程操作的第一步，通常是从远程主机克隆一个版本库，这时就要用到<code>git clone</code>命令。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ git <span class="built_in">clone</span> &lt;版本库的网址&gt;</div></pre></td></tr></table></figure>
<p>比如，克隆jQuery的版本库。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ git <span class="built_in">clone</span> https://github.com/jquery/jquery.git</div></pre></td></tr></table></figure>
<p>该命令会在本地主机生成一个目录，与远程主机的版本库同名。如果要指定不同的目录名，可以将目录名作为<code>git
clone</code>命令的第二个参数。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ git <span class="built_in">clone</span> &lt;版本库的网址&gt; &lt;本地目录名&gt;</div></pre></td></tr></table></figure>
<p><code>git
clone</code>支持多种协议，除了HTTP(s)以外，还支持SSH、Git、本地文件协议等，下面是一些例子。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">$ git <span class="built_in">clone</span> http[s]://example.com/path/to/repo.git/</div><div class="line">$ git <span class="built_in">clone</span> ssh://example.com/path/to/repo.git/</div><div class="line">$ git <span class="built_in">clone</span> git://example.com/path/to/repo.git/</div><div class="line">$ git <span class="built_in">clone</span> /opt/git/project.git </div><div class="line">$ git <span class="built_in">clone</span> file:///opt/git/project.git</div><div class="line">$ git <span class="built_in">clone</span> ftp[s]://example.com/path/to/repo.git/</div><div class="line">$ git <span class="built_in">clone</span> rsync://example.com/path/to/repo.git/</div></pre></td></tr></table></figure>
<p>SSH协议还有另一种写法。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ git <span class="built_in">clone</span> [user@]example.com:path/to/repo.git/</div></pre></td></tr></table></figure>
<p>通常来说，Git协议下载速度最快，SSH协议用于需要用户认证的场合。各种协议优劣的详细讨论请参考<a href="http://git-scm.com/book/en/Git-on-the-Server-The-Protocols" target="_blank" rel="external">官方文档</a>。</p>
<p>##二、git remote<br>为了便于管理，Git要求每个远程主机都必须指定一个主机名。<code>git
remote</code>命令就用于管理主机名。<br>不带选项的时候，<code>git remote</code>命令列出所有远程主机。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">$ git remote</div><div class="line">origin</div></pre></td></tr></table></figure>
<p>使用<code>-v</code>选项，可以参看远程主机的网址。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">$ git remote -v</div><div class="line">origin  git@github.com:jquery/jquery.git (fetch)</div><div class="line">origin  git@github.com:jquery/jquery.git (push)</div></pre></td></tr></table></figure>
<p>上面命令表示，当前只有一台远程主机，叫做<code>origin</code>，以及它的网址。<br>克隆版本库的时候，所使用的远程主机自动被Git命名为origin。如果想用其他的主机名，需要用<code>git
clone</code>命令的<code>-o</code>选项指定。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">$ git <span class="built_in">clone</span> -o jQuery https://github.com/jquery/jquery.git</div><div class="line">$ git remote</div><div class="line">jQuery</div></pre></td></tr></table></figure>
<p>上面命令表示，克隆的时候，指定远程主机叫做jQuery。<br><code>git remote show</code>命令加上主机名，可以查看该主机的详细信息。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ git remote show &lt;主机名&gt;</div></pre></td></tr></table></figure>
<p><code>git remote add</code>命令用于添加远程主机。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ git remote add &lt;主机名&gt; &lt;网址&gt;</div></pre></td></tr></table></figure>
<p><code>git remote rm</code>命令用于删除远程主机。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ git remote rm &lt;主机名&gt;</div></pre></td></tr></table></figure>
<p><code>git remote rename</code>命令用于远程主机的改名。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ git remote rename &lt;原主机名&gt; &lt;新主机名&gt;</div></pre></td></tr></table></figure>
<p>##三、git fetch<br>一旦远程主机的版本库有了更新（Git术语叫做commit），需要将这些更新取回本地，这时就要用到<code>git
fetch</code>命令。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ git fetch &lt;远程主机名&gt;</div></pre></td></tr></table></figure>
<p>上面命令将某个远程主机的更新，全部取回本地。<br><code>git
fetch</code>命令通常用来查看其他人的进程，因为它取回的代码对你本地的开发代码没有影响。<br>默认情况下，<code>git
fetch</code>取回所有分支（branch）的更新。如果只想取回特定分支的更新，可以指定分支名。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ git fetch &lt;远程主机名&gt; &lt;分支名&gt;</div></pre></td></tr></table></figure>
<p>比如，取回<code>origin</code>主机的<code>master</code>分支。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ git fetch origin master</div></pre></td></tr></table></figure>
<p>所取回的更新，在本地主机上要用”远程主机名/分支名”的形式读取。比如<code>origin</code>主机的<code>master</code>，就要用<code>origin/master</code>读取。<br><code>git branch</code>命令的<code>-r</code>选项，可以用来查看远程分支，<code>-a</code>选项查看所有分支。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">$ git branch -r</div><div class="line">origin/master</div><div class="line"></div><div class="line">$ git branch <span class="_">-a</span></div><div class="line">* master</div><div class="line">  remotes/origin/master</div></pre></td></tr></table></figure>
<p>  上面命令表示，本地主机的当前分支是<code>master</code>，远程分支是<code>origin/master</code>。<br>  取回远程主机的更新以后，可以在它的基础上，使用<code>git
  checkout</code>命令创建一个新的分支。</p>
  <figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ git checkout -b newBrach origin/master</div></pre></td></tr></table></figure>
<p>  上面命令表示，在<code>origin/master</code>的基础上，创建一个新分支。<br>  此外，也可以使用<code>git merge</code>命令或者<code>git
  rebase</code>命令，在本地分支上合并远程分支。</p>
  <figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">  $ git merge origin/master</div><div class="line"><span class="comment"># 或者</span></div><div class="line">  $ git rebase origin/master</div></pre></td></tr></table></figure>
<p>  上面命令表示在当前分支上，合并<code>origin/master</code>。</p>
<p>##四、git pull<br>  <code>git
  pull</code>命令的作用是，取回远程主机某个分支的更新，再与本地的指定分支合并。它的完整格式稍稍有点复杂。</p>
  <figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ git pull &lt;远程主机名&gt; &lt;远程分支名&gt;:&lt;本地分支名&gt;</div></pre></td></tr></table></figure>
<p>  比如，取回<code>origin</code>主机的<code>next</code>分支，与本地的<code>master</code>分支合并，需要写成下面这样。</p>
  <figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ git pull origin next:master</div></pre></td></tr></table></figure>
<p>  如果远程分支是与当前分支合并，则冒号后面的部分可以省略。</p>
  <figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ git pull origin next</div></pre></td></tr></table></figure>
<p>  上面命令表示，取回<code>origin/next</code>分支，再与当前分支合并。实质上，这等同于先做<code>git
  fetch</code>，再做<code>git merge</code>。</p>
  <figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">$ git fetch origin</div><div class="line">$ git merge origin/next</div></pre></td></tr></table></figure>
<p>  在某些场合，Git会自动在本地分支与远程分支之间，建立一种追踪关系（tracking）。比如，在<code>git
  clone</code>的时候，所有本地分支默认与远程主机的同名分支，建立追踪关系，也就是说，本地的<code>master</code>分支自动”追踪”<code>origin/master</code>分支。</p>
<p>  Git也允许手动建立追踪关系。</p>
  <figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">git branch --set-upstream master origin/next</div></pre></td></tr></table></figure>
<p>  上面命令指定<code>master</code>分支追踪<code>origin/next</code>分支。<br>  如果当前分支与远程分支存在追踪关系，<code>git pull</code>就可以省略远程分支名。</p>
  <figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ git pull origin</div></pre></td></tr></table></figure>
<p>  上面命令表示，本地的当前分支自动与对应的<code>origin</code>主机”追踪分支”（remote-tracking<br>  branch）进行合并。<br>  如果当前分支只有一个追踪分支，连远程主机名都可以省略。</p>
  <figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ git pull</div></pre></td></tr></table></figure>
<p>  上面命令表示，当前分支自动与唯一一个追踪分支进行合并。<br>  如果合并需要采用rebase模式，可以使用<code>--rebase</code>选项。</p>
  <figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ git pull --rebase &lt;远程主机名&gt; &lt;远程分支名&gt;:&lt;本地分支名&gt;</div></pre></td></tr></table></figure>
<p>  如果远程主机删除了某个分支，默认情况下，<code>git pull</code><br>  不会在拉取远程分支的时候，删除对应的本地分支。这是为了防止，由于其他人操作了远程主机，导致git<br>  pull不知不觉删除了本地分支。<br>  但是，你可以改变这个行为，加上参数<code>-p</code> 就会在本地删除远程已经删除的分支。</p>
  <figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">  $ git pull -p</div><div class="line"><span class="comment"># 等同于下面的命令</span></div><div class="line">  $ git fetch --prune origin </div><div class="line">  $ git fetch -p</div></pre></td></tr></table></figure>
<p>##五、git push<br>  <code>git push</code>命令用于将本地分支的更新，推送到远程主机。它的格式与git<br>  pull命令相仿。</p>
  <figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ git push &lt;远程主机名&gt; &lt;本地分支名&gt;:&lt;远程分支名&gt;</div></pre></td></tr></table></figure>
<p>  注意，分支推送顺序的写法是&lt;来源地&gt;:&lt;目的地&gt;，所以<code>git
  pull</code>是&lt;远程分支&gt;:&lt;本地分支&gt;，而<code>git push</code>是&lt;本地分支&gt;:&lt;远程分支&gt;。<br>  如果省略远程分支名，则表示将本地分支推送与之存在”追踪关系”的远程分支（通常两者同名），如果该远程分支不存在，则会被新建。</p>
  <figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ git push origin master</div></pre></td></tr></table></figure>
<p>  上面命令表示，将本地的<code>master</code>分支推送到<code>origin</code>主机的<code>master</code>分支。如果后者不存在，则会被新建。</p>
<p>  如果省略本地分支名，则表示删除指定的远程分支，因为这等同于推送一个空的本地分支到远程分支。</p>
  <figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">  $ git push origin :master</div><div class="line"><span class="comment"># 等同于</span></div><div class="line">  $ git push origin --delete master</div></pre></td></tr></table></figure>
<p>  上面命令表示删除<code>origin</code>主机的<code>master</code>分支。</p>
<p>  如果当前分支与远程分支之间存在追踪关系，则本地分支和远程分支都可以省略。</p>
  <figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ git push origin</div></pre></td></tr></table></figure>
<p>  上面命令表示，将当前分支推送到<code>origin</code>主机的对应分支。<br>  如果当前分支只有一个追踪分支，那么主机名都可以省略。</p>
  <figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ git push</div></pre></td></tr></table></figure>
<p>  如果当前分支与多个主机存在追踪关系，则可以使用-u选项指定一个默认主机，这样后面就可以不加任何参数使用<code>git
  push</code>。</p>
  <figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ git push -u origin master</div></pre></td></tr></table></figure>
<p>  上面命令将本地的<code>master</code>分支推送到<code>origin</code>主机，同时指定<code>origin</code>为默认主机，后面就可以不加任何参数使用<code>git
  push</code>了。</p>
<p>  不带任何参数的<code>git
  push</code>，默认只推送当前分支，这叫做simple方式。此外，还有一种matching方式，会推送所有有对应的远程分支的本地分支。Git<br>  2.0版本之前，默认采用matching方法，现在改为默认采用simple方式。如果要修改这个设置，可以采用<code>git
  config</code>命令。</p>
  <figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">  $ git config --global push.default matching</div><div class="line"><span class="comment"># 或者</span></div><div class="line">  $ git config --global push.default simple</div></pre></td></tr></table></figure>
<p>  还有一种情况，就是不管是否存在对应的远程分支，将本地的所有分支都推送到远程主机，这时需要使用<code>--all</code>选项。</p>
  <figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ git push --all origin</div></pre></td></tr></table></figure>
<p>  上面命令表示，将所有本地分支都推送到<code>origin</code>主机。<br>  如果远程主机的版本比本地版本更新，推送时Git会报错，要求先在本地做<code>git
  pull</code>合并差异，然后再推送到远程主机。这时，如果你一定要推送，可以使用<code>--force</code>选项。</p>
  <figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ git push --force origin</div></pre></td></tr></table></figure>
<p>  上面命令使用<code>--force</code>选项，结果导致远程主机上更新的版本被覆盖。除非你很确定要这样做，否则应该尽量避免使用<code>--force</code>选项。<br>  最后，<code>git push</code>不会推送标签（tag），除非使用<code>--tags</code>选项。</p>
  <figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ git push origin --tags</div></pre></td></tr></table></figure>
]]></content>
    
    <summary type="html">
    
      Git是目前最流行的版本管理系统，学会Git几乎成了开发者的必备技能。
    
    </summary>
    
      <category term="git" scheme="https://plpcm.github.io/blog/categories/git/"/>
    
    
      <category term="git" scheme="https://plpcm.github.io/blog/tags/git/"/>
    
  </entry>
  
  <entry>
    <title>virtualenv 和 virtualenvwrapper 实践</title>
    <link href="https://plpcm.github.io/blog/2016/02/02/python-virtualenv-virtualenvwrapper-practice/"/>
    <id>https://plpcm.github.io/blog/2016/02/02/python-virtualenv-virtualenvwrapper-practice/</id>
    <published>2016-02-02T08:39:16.000Z</published>
    <updated>2016-12-05T08:28:53.000Z</updated>
    
    <content type="html"><![CDATA[<p>各位 Python 的小伙伴肯定多多少少接触过 virtualenv。本文将介绍 virtualenv 以及如何更科学更优雅地使用 virtualenv。</p>
<h1 id="virtualenv"><a href="#virtualenv" class="headerlink" title="virtualenv"></a>virtualenv</h1><p>首先来聊一下 <code>virtualenv</code> 是个什么鬼。</p>
<p>在使用 <code>Python</code> 开发的过程中，工程一多，难免会碰到不同的工程依赖不同版本的库的问题；亦或者是在开发过程中不想让物理环境里充斥各种各样的库，引发未来的依赖灾难。此时，我们需要对于不同的工程使用不同的虚拟环境来保持开发环境以及宿主环境的清洁。这里，就要隆重介绍 <code>virtualenv</code>，一个可以帮助我们管理不同 <code>Python</code> 环境的绝好工具。<code>virtualenv</code> 可以在系统中建立多个不同并且相互不干扰的虚拟环境。另外，值得一提的是，在 <code>virtualenv</code> 的虚拟环境中使用 <code>pip</code> 安装依赖还可以绕过某些系统的权限设置，因为毕竟不需要向系统目录写入数据嘛~~</p>
<p>那么，<code>virtualenv</code> 是怎么运行的呢？</p>
<h3 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h3><p>首先从安装讲起，这里假设已经安装了 <code>pip</code>，如果没有安装 <code>pip</code> 的话，请自行出门谷歌(好吧，我是好人，附上<a href="https://pip.readthedocs.org/en/stable" target="_blank" rel="external"><code>pip</code>官方文档</a>链接)。之后就可以用 <code>pip</code> 来直接安装 <code>virtualenv</code> 了。当然，这里可能是需要使用 <code>sudo</code> 提升权限的，毕竟是在宿主物理环境里安装。如下命令中 <code>sudo</code> 省略，如有需求请自行添加。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">pip install virtualenv</div></pre></td></tr></table></figure>
<p>好了现在你拥有了 <code>virtualenv</code> 虚拟环境管理器。</p>
<h3 id="使用"><a href="#使用" class="headerlink" title="使用"></a>使用</h3><p>接下来说使用。</p>
<p>比如我们想要做一点奇怪的事情，写一个脚本去抓取某个网站的信息，我们暂且把这个工程叫做 <code>spider</code> 吧。这个工程里需要访问网络，我们打算使用为人类编写的网络访问库 <code>requests</code>，但是我们又不想在宿主环境中安装这个包。让我们开始吧。</p>
<p>假设我们把这个工程放在 <code>/path/to/project/spider/</code> 目录下，并且这里我们把虚拟环境直接放在工程目录下。首先，我们在这个目录下建立一个虚拟环境。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">cd</span> /path/to/project/spider</div><div class="line">virtualenv --no-site-packages venv</div></pre></td></tr></table></figure>
<p>命令<code>virtualenv</code>就可以创建一个独立的Python运行环境，我们还加上了参数<code>--no-site-packages</code>，这样，已经安装到系统Python环境中的所有第三方包都不会复制过来，这样，我们就得到了一个不带任何第三方包的“干净”的Python运行环境。</p>
<p>这样，虚拟环境就建立好了。此时可以看到，在这个目录下面会有三个目录被建立:</p>
<blockquote>
<ul>
<li>bin</li>
<li>include</li>
<li>lib</li>
</ul>
</blockquote>
<p>其中，<code>bin</code> 目录中包含一些在这个虚拟环境中可用的命令，以及开启虚拟环境的脚本 <code>activate</code>；<code>include</code> 中包含虚拟环境中的头文件，包括 <code>Python</code> 的头文件；<code>lib</code> 中就是一些依赖库啦~~</p>
<p>当然，现在我们还没有进入到虚拟环境中。激活虚拟环境只需要一条命令。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">source</span> venv/bin/activate</div><div class="line">(vv) plpcm:spider docker$</div></pre></td></tr></table></figure>
<p>注意到命令提示符变了，有个<code>(venv)</code>前缀，表示当前环境是一个名为<code>venv</code>的Python环境。</p>
<p>接下来安装工程需要的 <code>requests</code> 库。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">pip install requests</div></pre></td></tr></table></figure>
<p>搞定！</p>
<p>这时候在虚拟环境里就有了 <code>requests</code> 库，宿主环境中则不会被干扰。</p>
<p>那么如何退出虚拟环境嘞？退出就更简单啦，只需要下面一个命令就搞定啦。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">deactivate</div></pre></td></tr></table></figure>
<p>此时就回到了进入虚拟环境之前，一切都好像没发生过。多年以后，如果你忘记了虚拟环境的位置，一切就真的没发生过了 = =</p>
<p>补充一句，如果想要删除虚拟环境，只要把这个spider目录下的 venv目录删掉就好了。</p>
<h1 id="virtualenvwrapper"><a href="#virtualenvwrapper" class="headerlink" title="virtualenvwrapper"></a>virtualenvwrapper</h1><p>为神马需要 <code>virtualenvwrapper</code>？这要从 <code>virtualenv</code> 说起。</p>
<p>上一节结束的时候说，如果忘记了虚拟环境的位置，一切就真的没发生过了。虽然是句玩笑，不过真的会发生哦~</p>
<p><code>virtualenv</code> 的一个最大的缺点就是，每次开启虚拟环境之前要去虚拟环境所在目录下的 <code>bin</code> 目录下 <code>source</code> 一下 <code>activate</code>，这就需要我们记住每个虚拟环境所在的目录。</p>
<p>一种可行的解决方案是，将所有的虚拟环境目录全都集中起来，比如放到 <code>~/virtualenvs/</code>，并对不同的虚拟环境使用不同的目录来管理。<code>virtualenvwrapper</code> 正是这样做的。并且，它还省去了每次开启虚拟环境时候的 <code>source</code> 操作，使得虚拟环境更加好用。</p>
<h3 id="安装-1"><a href="#安装-1" class="headerlink" title="安装"></a>安装</h3><p>同样，从安装开始。</p>
<p>安装 <code>virtualenvwrapper</code> 也可以使用 <code>pip</code> 的方式。需要加入 <code>sudo</code> 的话请自行加入哦~</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">pip install virtualenvwrapper</div></pre></td></tr></table></figure>
<p>不过，在 Mac OS X El Capitan 上可能会出现安装报错的情况，主要问题出在一个叫做 <code>six</code> 的包上。因此安装的时候，可以采用如下方式。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">pip install virtualenvwrapper --ignore-installed six</div></pre></td></tr></table></figure>
<p>现在，我们就拥有了一个可以管理虚拟环境的神器。</p>
<h3 id="使用-1"><a href="#使用-1" class="headerlink" title="使用"></a>使用</h3><p>首先，需要对 <code>virtualenvwrapper</code> 进行配置。它需要指定一个环境变量，叫做 <code>WORKON_HOME</code>，并且需要运行一下它的初始化工具 <code>virtualenvwrapper.sh</code>，这个脚本在 <code>/usr/local/bin/</code> 目录下。<code>WORKON_HOME</code> 就是它将要用来存放各种虚拟环境目录的目录，这里我们可以设置为 <code>~/.virtualenvs</code>。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">export</span> WORKON_HOME=<span class="string">'~/.virtualenvs'</span></div><div class="line"><span class="built_in">source</span> /usr/<span class="built_in">local</span>/bin/virtualenvwrapper.sh</div></pre></td></tr></table></figure>
<p>由于每次都需要执行这两部操作，我们可以将其写入终端的配置文件中。例如，如果使用 <code>bash</code>，则添加到 <code>~/.bashrc</code> 中；如果使用 <code>zsh</code>，则添加到 <code>~/.zshrc</code> 中。这样每次启动终端的时候都会自动运行，终端其中之后 <code>virtualenvwrapper</code> 就可以用啦。</p>
<p>利用 <code>virtualenvwrapper</code>，我们可以使用下面的命令轻松创建一个虚拟环境。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">mkvirtualenv spider</div></pre></td></tr></table></figure>
<p>之后我们就有了一个叫做 <code>spider</code> 的虚拟环境。它被存放在 <code>$WORKON_HOME/spider</code> 目录下。</p>
<p>新建虚拟环境之后会自动激活虚拟环境。如果我们平时想要进入某个虚拟环境，可以用下面的命令。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">workon spider</div></pre></td></tr></table></figure>
<p>这也就是为什么环境变量中存放虚拟环境的目录为啥叫做 <code>WORKON_HOME</code>。顺便说一句，<code>workon</code> 后面可是可以支持用 <code>tab</code> 自动补全的哟。</p>
<p>同样，离开虚拟环境，可以使用。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">deactivate</div></pre></td></tr></table></figure>
<p>另外，删除虚拟环境也一样简单。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">rmvirtualenv spider</div></pre></td></tr></table></figure>
<h1 id="结束"><a href="#结束" class="headerlink" title="结束"></a>结束</h1><p>到这里，<code>virtualenv</code> 和 <code>virtualenvwrapper</code> 的基本使用就介绍完了，需要了解更多用法，可以参考官方文档哟。希望这两个工具能够帮助小伙伴们在工作中提高效率哟~~</p>
]]></content>
    
    <summary type="html">
    
      在使用 Python 开发的过程中，工程一多，难免会碰到不同的工程依赖不同版本的库的问题；亦或者是在开发过程中不想让物理环境里充斥各种各样的库，引发未来的依赖灾难。此时，我们需要对于不同的工程使用不同的虚拟环境来保持开发环境以及宿主环境的清洁。这里，就要隆重介绍 virtualenv，一个可以帮助我们管理不同 Python 环境的绝好工具。virtualenv 可以在系统中建立多个不同并且相互不干扰的虚拟环境。另外，值得一提的是，在 virtualenv 的虚拟环境中使用 pip 安装依赖还可以绕过某些系统的权限设置
    
    </summary>
    
      <category term="python" scheme="https://plpcm.github.io/blog/categories/python/"/>
    
    
      <category term="python" scheme="https://plpcm.github.io/blog/tags/python/"/>
    
      <category term="virtualenv" scheme="https://plpcm.github.io/blog/tags/virtualenv/"/>
    
  </entry>
  
  <entry>
    <title>Macdown 编辑器</title>
    <link href="https://plpcm.github.io/blog/2016/02/02/macdown-introduce/"/>
    <id>https://plpcm.github.io/blog/2016/02/02/macdown-introduce/</id>
    <published>2016-02-02T08:38:10.000Z</published>
    <updated>2016-11-30T07:50:28.000Z</updated>
    
    <content type="html"><![CDATA[<p><img src="http://macdown.uranusjr.com/static/base/img/logo-160.png" alt="MacDown logo"></p>
<p>Hello there! I’m <strong>MacDown</strong>, the open source Markdown editor for OS X.</p>
<p>Let me introduce myself.</p>
<h2 id="Markdown-and-I"><a href="#Markdown-and-I" class="headerlink" title="Markdown and I"></a>Markdown and I</h2><p><strong>Markdown</strong> is a plain text formatting syntax created by John Gruber, aiming to provide a easy-to-read and feasible markup. The original Markdown syntax specification can be found <a href="http://daringfireball.net/projects/markdown/syntax" target="_blank" rel="external">here</a>.</p>
<p><strong>MacDown</strong> is created as a simple-to-use editor for Markdown documents. I render your Markdown contents real-time into HTML, and display them in a preview panel.</p>
<p><img src="http://d.pr/i/10UGP+" alt="MacDown Screenshot"></p>
<p>I support all the original Markdown syntaxes. But I can do so much more! Various popular but non-standard syntaxes can be turned on/off from the <a href="#markdown-pane"><strong>Markdown</strong> preference pane</a>.</p>
<p>You can specify extra HTML rendering options through the <a href="#rendering-pane"><strong>Rendering</strong> preference pane</a>.</p>
<p>You can customize the editor window to you liking in the <a href="#editor-pane"><strong>Editor</strong> preferences pane</a>:</p>
<p>You can configure various application (that’s me!) behaviors in the <a href="#general-pane"><strong>General</strong> preference pane</a>.</p>
<h2 id="The-Basics"><a href="#The-Basics" class="headerlink" title="The Basics"></a>The Basics</h2><p>Before I tell you about all the extra syntaxes and capabilities I have, I’ll introduce you to the basics of standard markdown. If you already know markdown, and want to jump straight to learning about the fancier things I can do, I suggest you skip to the <a href="#markdown-pane"><strong>Markdown</strong> preference pane</a>. Lets jump right in.  </p>
<h3 id="Line-Breaks"><a href="#Line-Breaks" class="headerlink" title="Line Breaks"></a>Line Breaks</h3><p>To force a line break, put two spaces and a newline (return) at the end of the line.</p>
<ul>
<li><p>This two-line bullet<br>won’t break</p>
</li>
<li><p>This two-line bullet<br>will break</p>
</li>
</ul>
<p>Here is the code:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">* This two-line bullet </div><div class="line">won&apos;t break</div><div class="line"></div><div class="line">* This two-line bullet  </div><div class="line">will break</div></pre></td></tr></table></figure>
<h3 id="Strong-and-Emphasize"><a href="#Strong-and-Emphasize" class="headerlink" title="Strong and Emphasize"></a>Strong and Emphasize</h3><p><strong>Strong</strong>: <code>**Strong**</code> or <code>__Strong__</code> (Command-B)<br><em>Emphasize</em>: <code>*Emphasize*</code> or <code>_Emphasize_</code>[^emphasize] (Command-I)</p>
<h3 id="Headers-like-this-one"><a href="#Headers-like-this-one" class="headerlink" title="Headers (like this one!)"></a>Headers (like this one!)</h3><pre><code>Header 1
========

Header 2
--------
</code></pre><p>or</p>
<pre><code># Header 1
## Header 2
### Header 3
#### Header 4
##### Header 5
###### Header 6
</code></pre><h3 id="Links-and-Email"><a href="#Links-and-Email" class="headerlink" title="Links and Email"></a>Links and Email</h3><h4 id="Inline"><a href="#Inline" class="headerlink" title="Inline"></a>Inline</h4><p>Just put angle brackets around an email and it becomes clickable: <a href="&#x6d;&#97;&#x69;&#x6c;&#x74;&#x6f;&#58;&#117;&#114;&#97;&#x6e;&#x75;&#x73;&#x6a;&#x72;&#x40;&#x67;&#109;&#x61;&#105;&#108;&#46;&#99;&#111;&#109;">&#117;&#114;&#97;&#x6e;&#x75;&#x73;&#x6a;&#x72;&#x40;&#x67;&#109;&#x61;&#105;&#108;&#46;&#99;&#111;&#109;</a><br><code>&lt;uranusjr@gmail.com&gt;</code>  </p>
<p>Same thing with urls: <a href="http://macdown.uranusjr.com" target="_blank" rel="external">http://macdown.uranusjr.com</a><br><code>&lt;http://macdown.uranusjr.com&gt;</code>  </p>
<p>Perhaps you want to some link text like this: <a href="http://macdown.uranusjr.com" title="Title" target="_blank" rel="external">Macdown Website</a><br><code>[Macdown Website](http://macdown.uranusjr.com &quot;Title&quot;)</code> (The title is optional)  </p>
<h4 id="Reference-style"><a href="#Reference-style" class="headerlink" title="Reference style"></a>Reference style</h4><p>Sometimes it looks too messy to include big long urls inline, or you want to keep all your urls together.  </p>
<p>Make <a href="http://macdown.uranusjr.com" title="Title" target="_blank" rel="external">a link</a> <code>[a link][arbitrary_id]</code> then on it’s own line anywhere else in the file:<br><code>[arbitrary_id]: http://macdown.uranusjr.com &quot;Title&quot;</code></p>
<p>If the link text itself would make a good id, you can link <a href="http://macdown.uranusjr.com" target="_blank" rel="external">like this</a> <code>[like this][]</code>, then on it’s own line anywhere else in the file:<br><code>[like this]: http://macdown.uranusjr.com</code>  </p>
<h3 id="Images"><a href="#Images" class="headerlink" title="Images"></a>Images</h3><h4 id="Inline-1"><a href="#Inline-1" class="headerlink" title="Inline"></a>Inline</h4><p><code>![Alt Image Text](path/or/url/to.jpg &quot;Optional Title&quot;)</code></p>
<h4 id="Reference-style-1"><a href="#Reference-style-1" class="headerlink" title="Reference style"></a>Reference style</h4><p><code>![Alt Image Text][image-id]</code><br>on it’s own line elsewhere:<br><code>[image-id]: path/or/url/to.jpg &quot;Optional Title&quot;</code></p>
<h3 id="Lists"><a href="#Lists" class="headerlink" title="Lists"></a>Lists</h3><ul>
<li>Lists must be preceded by a blank line (or block element)</li>
<li>Unordered lists start each item with a <code>*</code></li>
</ul>
<ul>
<li><code>-</code> works too<ul>
<li>Indent a level to make a nested list<ol>
<li>Ordered lists are supported.</li>
<li>Start each item (number-period-space) like <code>1.</code></li>
<li>It doesn’t matter what number you use, I will render them sequentially</li>
<li>So you might want to start each line with <code>1.</code> and let me sort it out</li>
</ol>
</li>
</ul>
</li>
</ul>
<p>Here is the code:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">* Lists must be preceded by a blank line (or block element)</div><div class="line">* Unordered lists start each item with a `*`</div><div class="line">- `-` works too</div><div class="line">	* Indent a level to make a nested list</div><div class="line">		1. Ordered lists are supported.</div><div class="line">		2. Start each item (number-period-space) like `1. `</div><div class="line">		42. It doesn&apos;t matter what number you use, I will render them sequentially</div><div class="line">		1. So you might want to start each line with `1.` and let me sort it out</div></pre></td></tr></table></figure>
<h3 id="Block-Quote"><a href="#Block-Quote" class="headerlink" title="Block Quote"></a>Block Quote</h3><blockquote>
<p>Angle brackets <code>&gt;</code> are used for block quotes.<br>Technically not every line needs to start with a <code>&gt;</code> as long as<br>there are no empty lines between paragraphs.<br>Looks kinda ugly though.</p>
<blockquote>
<p>Block quotes can be nested.  </p>
<blockquote>
<p>Multiple Levels</p>
</blockquote>
</blockquote>
<p>Most markdown syntaxes work inside block quotes.</p>
<ul>
<li>Lists</li>
<li><a href="http://macdown.uranusjr.com" title="Title" target="_blank" rel="external">Links</a></li>
<li>Etc.</li>
</ul>
</blockquote>
<p>Here is the code:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">&gt; Angle brackets `&gt;` are used for block quotes.  </div><div class="line">Technically not every line needs to start with a `&gt;` as long as</div><div class="line">there are no empty lines between paragraphs.  </div><div class="line">&gt; Looks kinda ugly though.</div><div class="line">&gt; &gt; Block quotes can be nested.  </div><div class="line">&gt; &gt; &gt; Multiple Levels</div><div class="line">&gt;</div><div class="line">&gt; Most markdown syntaxes work inside block quotes.</div><div class="line">&gt;</div><div class="line">&gt; * Lists</div><div class="line">&gt; * [Links][arbitrary_id]</div><div class="line">&gt; * Etc.</div></pre></td></tr></table></figure>
<h3 id="Inline-Code"><a href="#Inline-Code" class="headerlink" title="Inline Code"></a>Inline Code</h3><p><code>Inline code</code> is indicated by surrounding it with backticks:<br><code>`Inline code` </code></p>
<p>If your <code>code has `backticks` </code> that need to be displayed, you can use double backticks:<br><figure class="highlight plain"><figcaption><span>``Code with `backticks` `` ````  (mind the spaces preceding the final set of backticks)</span></figcaption><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"></div><div class="line">### Block Code</div><div class="line">If you indent at least four spaces or one tab, I&apos;ll display a code block.</div><div class="line"></div><div class="line">	print(&apos;This is a code block&apos;)</div><div class="line">	print(&apos;The block must be preceded by a blank line&apos;)</div><div class="line">	print(&apos;Then indent at least 4 spaces or 1 tab&apos;)</div><div class="line">		print(&apos;Nesting does nothing. Your code is displayed Literally&apos;)</div><div class="line"></div><div class="line">I also know how to do something called [Fenced Code Blocks](#fenced-code-block) which I will tell you about later.</div><div class="line"></div><div class="line">### Horizontal Rules</div><div class="line">If you type three asterisks `***` or three dashes `---` on a line, I&apos;ll display a horizontal rule:</div><div class="line"></div><div class="line">***</div><div class="line"></div><div class="line"></div><div class="line">## &lt;a name=&quot;markdown-pane&quot;&gt;&lt;/a&gt;The Markdown Preference Pane</div><div class="line">This is where I keep all preferences related to how I parse markdown into html.  </div><div class="line">![Markdown preferences pane](http://d.pr/i/RQEi+)</div><div class="line"></div><div class="line">### Document Formatting</div><div class="line">The ***Smartypants*** extension automatically transforms straight quotes (`&quot;` and `&apos;`) in your text into typographer’s quotes (`“`, `”`, `‘`, and `’`) according to the context. Very useful if you’re a typography freak like I am. Quote and Smartypants are syntactically incompatible. If both are enabled, Quote takes precedence.</div><div class="line"></div><div class="line"></div><div class="line">### Block Formatting</div><div class="line"></div><div class="line">#### Table</div><div class="line"></div><div class="line">This is a table:</div><div class="line"></div><div class="line">First Header  | Second Header</div><div class="line">------------- | -------------</div><div class="line">Content Cell  | Content Cell</div><div class="line">Content Cell  | Content Cell</div><div class="line"></div><div class="line">You can align cell contents with syntax like this:</div><div class="line"></div><div class="line">| Left Aligned  | Center Aligned  | Right Aligned |</div><div class="line">|:------------- |:---------------:| -------------:|</div><div class="line">| col 3 is      | some wordy text |         $1600 |</div><div class="line">| col 2 is      | centered        |           $12 |</div><div class="line">| zebra stripes | are neat        |            $1 |</div><div class="line"></div><div class="line">The left- and right-most pipes (`|`) are only aesthetic, and can be omitted. The spaces don’t matter, either. Alignment depends solely on `:` marks.</div><div class="line"></div><div class="line">#### &lt;a name=&quot;fenced-code-block&quot;&gt;Fenced Code Block&lt;/a&gt;</div><div class="line"></div><div class="line">This is a fenced code block:</div></pre></td></tr></table></figure></p>
<p>print(‘Hello world!’)<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">You can also use waves (`~`) instead of back ticks (`` ` ``):</div><div class="line"></div><div class="line">~~~</div><div class="line">print(&apos;Hello world!&apos;)</div><div class="line">~~~</div><div class="line"></div><div class="line"></div><div class="line">You can add an optional language ID at the end of the first line. The language ID will only be used to highlight the code inside if you tick the ***Enable highlighting in code blocks*** option. This is what happens if you enable it:</div><div class="line"></div><div class="line">![Syntax highlighting example](http://d.pr/i/9HM6+)</div><div class="line"></div><div class="line">I support many popular languages as well as some generic syntax descriptions that can be used if your language of choice is not supported. See [relevant sections on the official site](http://macdown.uranusjr.com/features/) for a full list of supported syntaxes.</div><div class="line"></div><div class="line"></div><div class="line">### Inline Formatting</div><div class="line"></div><div class="line">The following is a list of optional inline markups supported:</div><div class="line"></div><div class="line">Option name         | Markup           | Result if enabled     |</div><div class="line">--------------------|------------------|-----------------------|</div><div class="line">Intra-word emphasis | So A\*maz\*ing   | So A&lt;em&gt;maz&lt;/em&gt;ing   |</div><div class="line">Strikethrough       | \~~Much wow\~~   | &lt;del&gt;Much wow&lt;/del&gt;   |</div><div class="line">Underline [^under]  | \_So doge\_      | &lt;u&gt;So doge&lt;/u&gt;        |</div><div class="line">Quote [^quote]      | \&quot;Such editor\&quot;  | &lt;q&gt;Such editor&lt;/q&gt;    |</div><div class="line">Highlight           | \==So good\==    | &lt;mark&gt;So good&lt;/mark&gt;  |</div><div class="line">Superscript         | hoge\^(fuga)     | hoge&lt;sup&gt;fuga&lt;/sup&gt;   |</div><div class="line">Autolink            | http://t.co      | &lt;http://t.co&gt;         |</div><div class="line">Footnotes           | [\^4] and [\^4]: | [^4] and footnote 4   |</div><div class="line"></div><div class="line">[^4]: You don&apos;t have to use a number. Arbitrary things like `[^footy note4]` and `[^footy note4]:` will also work. But they will *render* as numbered footnotes. Also, no need to keep your footnotes in order, I will sort out the order for you so they appear in the same order they were referenced in the text body. You can even keep some footnotes near where you referenced them, and collect others at the bottom of the file in the traditional place for footnotes. </div><div class="line"></div><div class="line"></div><div class="line"></div><div class="line"></div><div class="line">## &lt;a name=&quot;rendering-pane&quot;&gt;&lt;/a&gt;The Rendering Preference Pane</div><div class="line">This is where I keep preferences relating to how I render and style the parsed markdown in the preview window.  </div><div class="line">![Rendering preferences pane](http://d.pr/i/rT4d+)</div><div class="line"></div><div class="line">### CSS</div><div class="line">You can choose different css files for me to use to render your html. You can even customize or add your own custom css files.</div><div class="line"></div><div class="line">### Syntax Highlighting</div><div class="line">You have already seen how I can syntax highlight your fenced code blocks. See the [Fenced Code Block](#fenced-code-block) section if you haven’t! You can also choose different themes for syntax highlighting.</div><div class="line"></div><div class="line">### TeX-like Math Syntax</div><div class="line">I can also render TeX-like math syntaxes, if you allow me to.[^math] I can do inline math like this: \\( 1 + 1 \\) or this (in MathML): &lt;math&gt;&lt;mn&gt;1&lt;/mn&gt;&lt;mo&gt;+&lt;/mo&gt;&lt;mn&gt;1&lt;/mn&gt;&lt;/math&gt;, and block math:</div><div class="line"></div><div class="line">\\[</div><div class="line">    A^T_S = B</div><div class="line">\\]</div><div class="line"></div><div class="line">or (in MathML)</div><div class="line"></div><div class="line">&lt;math display=&quot;block&quot;&gt;</div><div class="line">    &lt;msubsup&gt;&lt;mi&gt;A&lt;/mi&gt; &lt;mi&gt;S&lt;/mi&gt; &lt;mi&gt;T&lt;/mi&gt;&lt;/msubsup&gt;</div><div class="line">    &lt;mo&gt;=&lt;/mo&gt;</div><div class="line">    &lt;mi&gt;B&lt;/mi&gt;</div><div class="line">&lt;/math&gt;</div><div class="line"></div><div class="line"></div><div class="line"></div><div class="line">### Task List Syntax</div><div class="line">1. [x] I can render checkbox list syntax</div><div class="line">	* [x] I support nesting</div><div class="line">	* [x] I support ordered *and* unordered lists</div><div class="line">2. [ ] I don&apos;t support clicking checkboxes directly in the html window</div><div class="line"></div><div class="line"></div><div class="line">### Jekyll front-matter</div><div class="line">If you like, I can display Jekyll front-matter in a nice table. Just make sure you put the front-matter at the very beginning of the file, and fence it with `---`. For example:</div></pre></td></tr></table></figure></p>
<hr>
<p>title: “Macdown is my friend”</p>
<h2 id="date-2014-06-06-20-00-00"><a href="#date-2014-06-06-20-00-00" class="headerlink" title="date: 2014-06-06 20:00:00"></a>date: 2014-06-06 20:00:00</h2><p>```</p>
<h3 id="Render-newline-literally"><a href="#Render-newline-literally" class="headerlink" title="Render newline literally"></a>Render newline literally</h3><p>Normally I require you to put two spaces and a newline (aka return) at the end of a line in order to create a line break. If you like, I can render a newline any time you end a line with a newline. However, if you enable this, markdown that looks lovely when I render it might look pretty funky when you let some <em>other</em> program render it.</p>
<h2 id="The-General-Preferences-Pane"><a href="#The-General-Preferences-Pane" class="headerlink" title="The General Preferences Pane"></a><a name="general-pane"></a>The General Preferences Pane</h2><p>This is where I keep preferences related to application behavior.<br><img src="http://d.pr/i/rvwu+" alt="General preferences pane"></p>
<p>The General Preferences Pane allows you to tell me how you want me to behave. For example, do you want me to make sure there is a document open when I launch? You can also tell me if I should constantly update the preview window as you type, or wait for you to hit <code>command-R</code> instead. Maybe you prefer your editor window on the right? Or to see the word-count as you type. This is also the place to tell me if you are interested in pre-releases of me, or just want to stick to better-tested official releases.  </p>
<h2 id="The-Editor-Preference-Pane"><a href="#The-Editor-Preference-Pane" class="headerlink" title="The Editor Preference Pane"></a><a name="editor-pane"></a>The Editor Preference Pane</h2><p>This is where I keep preferences related to the behavior and styling of the editing window.<br><img src="http://d.pr/i/6OL5+" alt="Editor preferences pane"></p>
<h3 id="Styling"><a href="#Styling" class="headerlink" title="Styling"></a>Styling</h3><p>My editor provides syntax highlighting. You can edit the base font and the coloring/sizing theme. I provided some default themes (courtesy of <a href="http://mouapp.com" target="_blank" rel="external">Mou</a>’s creator, Chen Luo) if you don’t know where to start.</p>
<p>You can also edit, or even add new themes if you want to! Just click the <strong><em>Reveal</em></strong> button, and start moving things around. Remember to use the correct file extension (<code>.styles</code>), though. I’m picky about that.</p>
<p>I offer auto-completion and other functions to ease your editing experience. If you don’t like it, however, you can turn them off.</p>
<h2 id="Hack-On"><a href="#Hack-On" class="headerlink" title="Hack On"></a>Hack On</h2><p>That’s about it. Thanks for listening. I’ll be quiet from now on (unless there’s an update about the app—I’ll remind you for that!).</p>
<p>Happy writing!</p>
<p>[^emphasize]: If <strong>Underlines</strong> is turned on, <code>_this notation_</code> will render as underlined instead of emphasized </p>
<p>[^under]: If <strong>Underline</strong> is disabled <code>_this_</code> will be rendered as <em>emphasized</em> instead of being underlined.</p>
<p>[^quote]: <strong>Quote</strong> replaces literal <code>&quot;</code> characters with html <code>&lt;q&gt;</code> tags. <strong>Quote</strong> and <strong>Smartypants</strong> are syntactically incompatible. If both are enabled, <strong>Quote</strong> takes precedence. Note that <strong>Quote</strong> is different from <em>blockquote</em>, which is part of standard Markdown.</p>
<p>[^math]: Internet connection required.</p>
]]></content>
    
    <summary type="html">
    
      Hello there! I’m MacDown, the open source Markdown editor for OS X.
    
    </summary>
    
      <category term="mac" scheme="https://plpcm.github.io/blog/categories/mac/"/>
    
    
      <category term="markdown" scheme="https://plpcm.github.io/blog/tags/markdown/"/>
    
      <category term="mac" scheme="https://plpcm.github.io/blog/tags/mac/"/>
    
  </entry>
  
  <entry>
    <title>Mac 下两款 Markdown 编辑器 Mou/MacDown 大 PK</title>
    <link href="https://plpcm.github.io/blog/2016/02/02/markdown-editor-Mou-MacDown-pk/"/>
    <id>https://plpcm.github.io/blog/2016/02/02/markdown-editor-Mou-MacDown-pk/</id>
    <published>2016-02-02T07:30:16.000Z</published>
    <updated>2016-11-30T08:18:31.000Z</updated>
    
    <content type="html"><![CDATA[<p>转载自 <a href="http://www.jianshu.com/p/6c157af09e84" target="_blank" rel="external">http://www.jianshu.com/p/6c157af09e84</a></p>
<p><a href="http://25.io/mou/" target="_blank" rel="external">Mou</a> 和 <a href="http://macdown.uranusjr.com/" target="_blank" rel="external">MacDown</a> 是我在 Mac 下用过的两款优秀的 Markdown 编辑器。之前一直使用的是 Mou，但不知怎的最近 Mou 在保存时总有 4s 以上的卡顿，这让我很不爽，没找到有效的解决方法，于是我被迫去寻找其它的 MD 编辑器。我尝试过很多种，但总觉得没有 Mou 体验好，最终让我找到了 MacDown——OS X下开放源代码 Markdown 编辑器。</p>
<h3 id="背后的故事"><a href="#背后的故事" class="headerlink" title="背后的故事"></a>背后的故事</h3><p>很有兴趣关注了这两款软件的作者及背后的故事，发现很有趣，在评测两款软件之前我们先八一八故事吧。</p>
<p>Mou 的作者罗晨，个人主页：<a href="http://chenluois.com/" target="_blank" rel="external">http://chenluois.com/</a>，现居住天津，自由职业者。MacDown 的作者Tzu-ping Chung，个人主页：<a href="https://uranusjr.com/" target="_blank" rel="external">https://uranusjr.com/</a>，现居住台北市，应该是台湾同胞吧。</p>
<p>根据 MacDown 作者的<a href="https://uranusjr.com/blog/post/58/introducing-macdown/" target="_blank" rel="external">介绍</a>，他曾经一度是 Markdown 的重度用户，而使用的编辑器基本是 Mou，但 Mou 可以处理<a href="https://help.github.com/articles/github-flavored-markdown#fenced-code-blocks" target="_blank" rel="external">fenced code blocks</a>，却对代码高亮不支持，同时在渲染 Markdown 时也有 bug，这让他很苦恼。Mou 的作者当时正准备<a href="http://www.v2ex.com/t/112732" target="_blank" rel="external">转手</a>该软件，一直没有更新，所以，他就开始从头开始模仿 Mou 写一个，因为是 Markdown editor for Macs，所以取名为 MacDown。</p>
<p>MacDown 作者 Chung 在征得 Mou 作者 Luo 的同意使用了 Mou 的几款主题，发布了 MacDown 的原始版本。Luo 最后发现 MacDown 时，很气愤，并指责 Chung 是 copycat，意思是 MacDown 山寨了 Mou。Chung 也意识到确实是自己抄袭了 Mou 很多东西，根据某条推文的<a href="https://twitter.com/remaerd/status/484914820408279040" target="_blank" rel="external">建议</a>（并不是Luo发布的），将之前 github 中<a href="https://github.com/uranusjr/macdown/blob/master/README.md" target="_blank" rel="external">项目描述</a> 改成了：</p>
<blockquote>
<p>MacDown is an open source Markdown editor for OS X, released under the MIT License. The author stole the idea from Chen Luo’s Mou so that people can make crappy clones. ^<a href="https://github.com/uranusjr/macdown/commit/b6f87f123ace20cd1cc44c9f98d9d6a911f50b9c" target="_blank" rel="external">1</a></p>
</blockquote>
<p><img src="/blog/uploads/markdown-editor-Mou-MacDown-pk/macdown1.png" alt="MacDown logo"></p>
<p>比较详细的情节可以参见 Chung 的<a href="http://macdown.uranusjr.com/blog/post/5/show-hn-macdown/" target="_blank" rel="external">博客</a>。至于 MacDown 和 Mou 的关系是怎样的，是不是 MacDown 就是不道德地克隆了 Mou 呢？这个每个人都有自己的看法，这里就不讨论了。</p>
<p>欣喜的是，目前两款软件都找到自己的发展模式，Mou 已经完成了众筹，即将发布 1.0 版本，如果有对 Mou 有情怀的同学可以<a href="http://25.io/mou/store/" target="_blank" rel="external">支持</a>作者；MacDown 依旧会走自己开源的道路。</p>
<p>Chung 的一句话也道出了我的心声：</p>
<blockquote>
<p>Let’s focus on making better software for everyone.</p>
</blockquote>
<p>好了，八卦完了，最后我要对两位作者表示由衷的谢意，贡献给我们好用的软件！下面我会根据我体验，分别提一下两款软件各自的特色地方。</p>
<h3 id="共同功能"><a href="#共同功能" class="headerlink" title="共同功能"></a>共同功能</h3><ul>
<li>提供丰富的简洁大方好看的主题，同时支持自定义</li>
<li>提供丰富的渲染 Markdown 之后的 CSS 样式，同时支持自定义样式</li>
<li>英文单词的自动补全功能，按下 Esc 键列出补全的列表</li>
<li>字符、单词统计功能</li>
<li>支持 fenced code blocks</li>
<li>TeX 数学公式的支持</li>
<li>支持导出 HTML 和 PDF 两种格式</li>
<li>便捷的快捷键操作</li>
<li>…</li>
</ul>
<h3 id="Mou-特色功能"><a href="#Mou-特色功能" class="headerlink" title="Mou 特色功能"></a>Mou 特色功能</h3><h4 id="集成-Tumblr-和-Scriptogr-am-发布博文"><a href="#集成-Tumblr-和-Scriptogr-am-发布博文" class="headerlink" title="集成 Tumblr 和 Scriptogr.am 发布博文"></a>集成 Tumblr 和 Scriptogr.am 发布博文</h4><p>可以配置 Tumblr 和 Scriptogr.am 的邮箱，在 Mou 上写文章通过 <code>File-&gt;Post-&gt;</code> 可以发布到这两个平台上，非常方便。</p>
<p><img src="/blog/uploads/markdown-editor-Mou-MacDown-pk/macdown2.png" alt="Mou 支持集成 Tumblr 和 Scriptor.am"></p>
<p><code>Mou 支持集成 Tumblr 和 Scriptor.am</code></p>
<h3 id="语言支持"><a href="#语言支持" class="headerlink" title="语言支持"></a>语言支持</h3><p>Mou 内置 CJK 字符支持，你可以很容易使用中文、日文、韩文等来写文章，同时还支持竖排的风格。</p>
<p><img src="/blog/uploads/markdown-editor-Mou-MacDown-pk/macdown3.png" alt="Mou 支持 CJK 及竖排"></p>
<p><code>Mou 支持 CJK 及竖排</code></p>
<h3 id="MacDown-特色"><a href="#MacDown-特色" class="headerlink" title="MacDown 特色"></a>MacDown 特色</h3><h4 id="代码高亮"><a href="#代码高亮" class="headerlink" title="代码高亮"></a>代码高亮</h4><p>Mou 和 MacDown 都支持 fenced code blocks（前后三个反引号可以表示代码块），但 MacDown 支持加语言标识符实现代码高亮，这对程序员来说简直是福音啊，非常棒的功能。</p>
<p><img src="/blog/uploads/markdown-editor-Mou-MacDown-pk/macdown4.png" alt="MacDown 支持代码高亮"></p>
<p><code>MacDown 支持代码高亮</code></p>
<h4 id="GFM-Task-List-支持"><a href="#GFM-Task-List-支持" class="headerlink" title="GFM Task List 支持"></a>GFM Task List 支持</h4><p>MacDown 支持 <a href="http://www.jianshu.com/p/6c157af09e84" target="_blank" rel="external">Task list</a>，有了这个功能，你可以将你的 MD 编辑器立马变成 TODO list，是不是很赞？</p>
<p><img src="/blog/uploads/markdown-editor-Mou-MacDown-pk/macdown5.png" alt="MacDown 对 Task list 的支持"></p>
<p><code>MacDown 对 Task list 的支持</code></p>
<h4 id="Jekyll-Front-matter-支持"><a href="#Jekyll-Front-matter-支持" class="headerlink" title="Jekyll Front-matter 支持"></a>Jekyll Front-matter 支持</h4><p>很多人使用 Jekyll 作为博客引擎，这时 Jekyll 的前面那段该怎么去渲染呢？MacDown 和 github 一样可以支持。</p>
<p><img src="/blog/uploads/markdown-editor-Mou-MacDown-pk/macdown6.png" alt="MacDown 对 Jekyll front-matter 的支持"></p>
<p><code>MacDown 对 Jekyll front-matter 的支持</code></p>
<h3 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h3><p>OK，总结完了，如果不是 Mou 在我的 Mac 上有卡顿，我也没想着要换一款编辑器，目前我在用 MacDown 感觉还是很不错的，因为有代码高亮支持就足以把我留下了。至于你选哪一款，你可以下载下来自己体验体验，反正软件都很小。也许你跟我一样，因为某个小瑕疵放弃某个软件，又因为某个小功能的惊喜而喜欢上某个软件。</p>
]]></content>
    
    <summary type="html">
    
      Mou 和 MacDown 是我在 Mac 下用过的两款优秀的 Markdown 编辑器。之前一直使用的是 Mou，但不知怎的最近 Mou 在保存时总有 4s 以上的卡顿，这让我很不爽，没找到有效的解决方法，于是我被迫去寻找其它的 MD 编辑器。我尝试过很多种，但总觉得没有 Mou 体验好，最终让我找到了 MacDown——OS X下开放源代码 Markdown 编辑器。
    
    </summary>
    
      <category term="mac" scheme="https://plpcm.github.io/blog/categories/mac/"/>
    
    
      <category term="markdown" scheme="https://plpcm.github.io/blog/tags/markdown/"/>
    
      <category term="mac" scheme="https://plpcm.github.io/blog/tags/mac/"/>
    
  </entry>
  
  <entry>
    <title>pip安装使用详解</title>
    <link href="https://plpcm.github.io/blog/2016/02/02/python-pip/"/>
    <id>https://plpcm.github.io/blog/2016/02/02/python-pip/</id>
    <published>2016-02-02T02:30:16.000Z</published>
    <updated>2016-12-05T03:14:21.000Z</updated>
    
    <content type="html"><![CDATA[<p>pip类似RedHat里面的yum，安装<a href="http://www.ttlsa.com/python/" target="_blank" rel="external">Python</a>包非常方便。本节详细介绍pip的安装、以及使用方法。</p>
<h3 id="1、pip下载安装"><a href="#1、pip下载安装" class="headerlink" title="1、pip下载安装"></a><strong>1、pip下载安装</strong></h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">curl -O https://bootstrap.pypa.io/get-pip.py</div><div class="line">sudo python get-pip.py</div></pre></td></tr></table></figure>
<h3 id="2-pip使用详解"><a href="#2-pip使用详解" class="headerlink" title="2. pip使用详解"></a><strong>2. pip使用详解</strong></h3><p>2.1 pip安装包</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">pip install SomePackage</div><div class="line">[...]</div><div class="line">Successfully installed SomePackage</div></pre></td></tr></table></figure>
<p>2.2 pip查看已安装的包</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">show --files SomePackage</div><div class="line">  Name: SomePackage</div><div class="line">  Version: 1.0</div><div class="line">  Location: /my/env/lib/pythonx.x/site-packages</div><div class="line">  Files:</div><div class="line">   ../somepackage/__init__.py</div><div class="line">  [...]</div></pre></td></tr></table></figure>
<p>2.3 pip检查哪些包需要更新</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">pip list --outdated</div><div class="line">  SomePackage (Current: 1.0 Latest: 2.0)</div></pre></td></tr></table></figure>
<p>2.4 pip升级包</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">pip install --upgrade SomePackage</div><div class="line">  [...]</div><div class="line">  Found existing installation: SomePackage 1.0</div><div class="line">  Uninstalling SomePackage:</div><div class="line">    Successfully uninstalled SomePackage</div><div class="line">  Running setup.py install <span class="keyword">for</span> SomePackage</div><div class="line">  Successfully installed SomePackage</div></pre></td></tr></table></figure>
<p>2.5 pip卸载包</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">pip uninstall SomePackage</div><div class="line">  Uninstalling SomePackage:</div><div class="line">    /my/env/lib/pythonx.x/site-packages/somepackage</div><div class="line">  Proceed (y/n)? y</div><div class="line">  Successfully uninstalled SomePackage</div></pre></td></tr></table></figure>
<h3 id="3-pip使用实例"><a href="#3-pip使用实例" class="headerlink" title="3. pip使用实例"></a><strong>3. pip使用实例</strong></h3><p>3.1 安装<a href="http://www.ttlsa.com/redis/" target="_blank" rel="external">redis</a></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">pip install redis</div></pre></td></tr></table></figure>
<p>3.2 卸载redis</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">pip uninstall redis</div><div class="line">Uninstalling redis:</div><div class="line">  /usr/lib/python2.6/site-packages/redis-2.9.1-py2.6.egg-info</div><div class="line">.....省略一些内容....</div><div class="line">Proceed (y/n)? y</div><div class="line">  Successfully uninstalled redis</div></pre></td></tr></table></figure>
<p>3.3 查看待更新包</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">pip list --outdate</div><div class="line">pygpgme (Current: 0.1 Latest: 0.3)</div><div class="line">pycurl (Current: 7.19.0 Latest: 7.19.3.1)</div><div class="line">iniparse (Current: 0.3.1 Latest: 0.4)</div></pre></td></tr></table></figure>
<h3 id="4-常见错误"><a href="#4-常见错误" class="headerlink" title="4. 常见错误"></a><strong>4. 常见错误</strong></h3><p>4.1 ImportError No module named setuptools<br>请参考《<a href="http://www.ttlsa.com/python/importerror-no-module-named-setuptools-res/?preview=true" target="_blank" rel="external">ImportError No module named setuptools解决</a>》</p>
<h3 id="5-pip参数解释"><a href="#5-pip参数解释" class="headerlink" title="5. pip参数解释"></a><strong>5. pip参数解释</strong></h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div></pre></td><td class="code"><pre><div class="line">pip --help</div><div class="line"></div><div class="line">Usage:</div><div class="line">  pip &lt;<span class="built_in">command</span>&gt; [options]</div><div class="line"></div><div class="line">Commands:</div><div class="line">  install                     Install packages.</div><div class="line">  download                    Download packages.</div><div class="line">  uninstall                   Uninstall packages.</div><div class="line">  freeze                      Output installed packages <span class="keyword">in</span> requirements format.</div><div class="line">  list                        List installed packages.</div><div class="line">  show                        Show information about installed packages.</div><div class="line">  check                       Verify installed packages have compatible dependencies.</div><div class="line">  search                      Search PyPI <span class="keyword">for</span> packages.</div><div class="line">  wheel                       Build wheels from your requirements.</div><div class="line">  <span class="built_in">hash</span>                        Compute hashes of package archives.</div><div class="line">  completion                  A helper <span class="built_in">command</span> used <span class="keyword">for</span> <span class="built_in">command</span> completion.</div><div class="line">  <span class="built_in">help</span>                        Show <span class="built_in">help</span> <span class="keyword">for</span> commands.</div><div class="line"></div><div class="line">General Options:</div><div class="line">  -h, --help                  Show help.</div><div class="line">  --isolated                  Run pip <span class="keyword">in</span> an isolated mode, ignoring environment variables and user configuration.</div><div class="line">  -v, --verbose               Give more output. Option is additive, and can be used up to 3 times.</div><div class="line">  -V, --version               Show version and exit.</div><div class="line">  -q, --quiet                 Give less output. Option is additive, and can be used up to 3 <span class="built_in">times</span> (corresponding to WARNING, ERROR, and CRITICAL logging levels).</div><div class="line">  --log &lt;path&gt;                Path to a verbose appending log.</div><div class="line">  --proxy &lt;proxy&gt;             Specify a proxy <span class="keyword">in</span> the form [user:passwd@]proxy.server:port.</div><div class="line">  --retries &lt;retries&gt;         Maximum number of retries each connection should attempt (default 5 <span class="built_in">times</span>).</div><div class="line">  --timeout &lt;sec&gt;             Set the socket timeout (default 15 seconds).</div><div class="line">  --exists-action &lt;action&gt;    Default action when a path already exists: (s)witch, (i)gnore, (w)ipe, (b)ackup, (a)bort.</div><div class="line">  --trusted-host &lt;hostname&gt;   Mark this host as trusted, even though it does not have valid or any HTTPS.</div><div class="line">  --cert &lt;path&gt;               Path to alternate CA bundle.</div><div class="line">  --client-cert &lt;path&gt;        Path to SSL client certificate, a single file containing the private key and the certificate <span class="keyword">in</span> PEM format.</div><div class="line">  --cache-dir &lt;dir&gt;           Store the cache data <span class="keyword">in</span> &lt;dir&gt;.</div><div class="line">  --no-cache-dir              Disable the cache.</div><div class="line">  --disable-pip-version-check</div><div class="line">                              Don<span class="string">'t periodically check PyPI to determine whether a new version of pip is available for download. Implied with --no-index.</span></div></pre></td></tr></table></figure>
<h3 id="6-结束"><a href="#6-结束" class="headerlink" title="6. 结束"></a>6.<strong> 结束</strong></h3><p>安装使用一目了然，太简单了。</p>
]]></content>
    
    <summary type="html">
    
      pip类似RedHat里面的yum，安装Python包非常方便。本节详细介绍pip的安装、以及使用方法。
    
    </summary>
    
      <category term="python" scheme="https://plpcm.github.io/blog/categories/python/"/>
    
    
      <category term="python" scheme="https://plpcm.github.io/blog/tags/python/"/>
    
      <category term="pip" scheme="https://plpcm.github.io/blog/tags/pip/"/>
    
  </entry>
  
  <entry>
    <title>Hello World</title>
    <link href="https://plpcm.github.io/blog/2015/12/22/hello-world/"/>
    <id>https://plpcm.github.io/blog/2015/12/22/hello-world/</id>
    <published>2015-12-22T11:08:10.000Z</published>
    <updated>2016-11-30T07:50:28.000Z</updated>
    
    <content type="html"><![CDATA[<hr>
<p>Welcome to <a href="https://hexo.io/" target="_blank" rel="external">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/" target="_blank" rel="external">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html" target="_blank" rel="external">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues" target="_blank" rel="external">GitHub</a>.</p>
<h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ hexo new <span class="string">"My New Post"</span></div></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/writing.html" target="_blank" rel="external">Writing</a></p>
<h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ hexo server</div></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/server.html" target="_blank" rel="external">Server</a></p>
<h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ hexo generate</div></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/generating.html" target="_blank" rel="external">Generating</a></p>
<h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ hexo deploy</div></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/deployment.html" target="_blank" rel="external">Deployment</a></p>
]]></content>
    
    <summary type="html">
    
      使用 hexo 搭建基于github的免费blog
    
    </summary>
    
      <category term="hexo" scheme="https://plpcm.github.io/blog/categories/hexo/"/>
    
    
      <category term="hexo" scheme="https://plpcm.github.io/blog/tags/hexo/"/>
    
  </entry>
  
</feed>
